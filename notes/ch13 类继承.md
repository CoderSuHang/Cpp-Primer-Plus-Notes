## ç¬¬åä¸‰ç«  ç±»ç»§æ‰¿

é¢å‘å¯¹è±¡ç¼–ç¨‹çš„ä¸»è¦ç›®çš„ä¹‹ä¸€æ˜¯æä¾›å¯é‡ç”¨çš„ä»£ç ã€‚å¼€å‘æ–°é¡¹ç›®ï¼Œå°¤å…¶æ˜¯å½“é¡¹ç›®ååˆ†åºå¤§æ—¶ï¼Œé‡ç”¨ç»è¿‡æµ‹è¯•çš„ä»£ç æ¯”é‡æ–°ç¼–å†™ä»£ç è¦å¥½å¾—å¤šã€‚ä½¿ç”¨å·²æœ‰çš„ä»£ç å¯ä»¥èŠ‚çœæ—¶é—´ï¼Œç”±äºå·²æœ‰çš„ä»£ç å·²è¢«ä½¿ç”¨å’Œæµ‹è¯•è¿‡ï¼Œå› æ­¤æœ‰åŠ©äºé¿å…åœ¨ç¨‹åºä¸­å¼•å…¥é”™è¯¯ã€‚å¦å¤–ï¼Œå¿…é¡»è€ƒè™‘çš„ç»†èŠ‚è¶Šå°‘ï¼Œä¾¿è¶Šèƒ½ä¸“æ³¨äºç¨‹åºçš„æ•´ä½“ç­–ç•¥ã€‚

C++æä¾›äº†æ¯”ä¿®æ”¹ä»£ç æ›´å¥½çš„æ–¹æ³•æ¥æ‰©å±•å’Œä¿®æ”¹ç±»ã€‚è¿™ç§æ–¹æ³•å«ä½œç±»ç»§æ‰¿ï¼Œå®ƒèƒ½å¤Ÿä»å·²æœ‰çš„ç±»æ´¾ç”Ÿå‡ºæ–°çš„ç±»ï¼Œè€Œæ´¾ç”Ÿç±»ç»§æ‰¿äº†åŸæœ‰ç±»ï¼ˆç§°ä¸ºåŸºç±»ï¼‰çš„ç‰¹å¾ï¼ŒåŒ…æ‹¬æ–¹æ³•ã€‚

* å¯ä»¥åœ¨å·²æœ‰ç±»çš„åŸºç¡€ä¸Šæ·»åŠ åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼Œå¯¹äºæ•°ç»„ç±»ï¼Œå¯ä»¥æ·»åŠ æ•°å­¦è¿ç®—ã€‚
* å¯ä»¥ç»™ç±»æ·»åŠ æ•°æ®ã€‚ä¾‹å¦‚ï¼Œå¯¹äºå­—ç¬¦ä¸²ç±»ï¼Œå¯ä»¥æ´¾ç”Ÿå‡ºä¸€ä¸ªç±»ï¼Œå¹¶æ·»åŠ æŒ‡å®šå­—ç¬¦ä¸²æ˜¾ç¤ºé¢œè‰²çš„æ•°æ®æˆå‘˜ã€‚
* å¯ä»¥ä¿®æ”¹ç±»æ–¹æ³•çš„è¡Œä¸ºã€‚ä¾‹å¦‚ï¼Œå¯¹äºä»£è¡¨æä¾›ç»™é£æœºä¹˜å®¢çš„æœåŠ¡çš„ Passenger ç±»å¯ä»¥æ´¾ç”Ÿå‡ºæä¾›æ›´é«˜çº§åˆ«æœåŠ¡çš„FirstClassPassenger ç±»ã€‚

å½“ç„¶ï¼Œå¯ä»¥é€šè¿‡å¤åˆ¶åŸå§‹ç±»ä»£ç ï¼Œå¹¶å¯¹å…¶è¿›è¡Œä¿®æ”¹æ¥å®Œæˆä¸Šè¿°å·¥ä½œï¼Œä½†ç»§æ‰¿æœºåˆ¶åªéœ€æä¾›æ–°ç‰¹æ€§ï¼Œç”šè‡³ä¸éœ€è¦è®¿é—®æºä»£ç å°±å¯ä»¥æ´¾ç”Ÿå‡ºç±»ã€‚

### 13.1 ä¸€ä¸ªç®€å•çš„åŸºç±»

ä»ä¸€ä¸ªç±»æ´¾ç”Ÿå‡ºå¦ä¸€ä¸ªç±»æ—¶ï¼ŒåŸå§‹ç±»ç§°ä¸ºåŸºç±»ï¼Œç»§æ‰¿ç±»ç§°ä¸ºæ´¾ç”Ÿç±»ã€‚

* 1ã€åŸºç±»ï¼š

  * ä»¥Webtownä¿±ä¹éƒ¨å†³å®šè·Ÿè¸ªä¹’ä¹“çƒä¼šä¼šå‘˜ä¸ºä¾‹ï¼Œè®¾è®¡ä¸€ä¸ªç®€å•çš„ TableTennisPlayer ç±»ã€‚

  * TableTennisPlayer ç±»åªæ˜¯è®°å½•ä¼šå‘˜çš„å§“åä»¥åŠæ˜¯å¦æœ‰çƒæ¡Œã€‚

    * ```c++
      #pragma once
      // ch13_01_tabtenn0.h -- a table-tennis base class
      #ifndef CH13_01_TABTENN0_H_
      #define CH13_01_TABTENN0_H_
      #include <string>
      
      using std::string;
      // simple base class
      class TableTennisPlayer
      {
      private:
      	string firstname;
      	string lastname;
      	bool hasTable;
      public:
      	TableTennisPlayer(const string& fn = "none", const string& ln = "none", bool ht = false);
      	void Name() const;
      	bool HasTable() const { return hasTable; };
      	void ResetTable(bool v) { hasTable = v; };
      };
      #endif
      ```

    * ```c++
      // ch13_02_tabtenn0.cpp -- simple base-class method
      #include "ch13_01_tabtenn0.h"
      #include <iostream>
      
      TableTennisPlayer::TableTennisPlayer(const string & fn, 
      	const string & ln, bool ht) : firstname(fn), 
      	lastname(ln), hasTable(ht) {}
      
      void TableTennisPlayer::Name() const
      {
      	std::cout << lastname << ", " << firstname;
      }
      ```

      * å…¶ä¸­ch13_02_tabtenn0.cppä½¿ç”¨äº†ç¬¬12ç« ä»‹ç»çš„æˆå‘˜åˆå§‹åŒ–åˆ—è¡¨è¯­æ³•ï¼Œç­‰ä»·äºä¸‹é¢å†…å®¹ï¼š

        * ```c++
          TableTennisPlayer::TableTennisPlayer(const string & fn, 
          	const string & ln, bool ht)
          {
          	firstname = fn; 
          	lastname = ln;
              hasTable = ht;
          }
          ```

        * è¯¦ç»†æ­¥éª¤æ˜¯ï¼š

          * è¿™å°†é¦–å…ˆä¸º firstname è°ƒç”¨ string çš„é»˜è®¤æ„é€ å‡½æ•°ï¼Œå†è°ƒç”¨ string çš„èµ‹å€¼è¿ç®—ç¬¦å°† firstname è®¾ç½®ä¸º fnï¼Œ
          * ä½†åˆå§‹åŒ–åˆ—è¡¨è¯­æ³•å¯å‡å°‘ä¸€ä¸ªæ­¥éª¤ï¼Œå®ƒç›´æ¥ä½¿ç”¨ string çš„å¤åˆ¶æ„é€ å‡½æ•°å°† firstname åˆå§‹åŒ–ä¸º fn

    * ```c++
      // ch13_03_usett0.cpp -- using a base class
      #include <iostream>
      #include "ch13_01_tabtenn0.h"
      
      int main(void)
      {
      	using std::cout;
      	TableTennisPlayer player1("Chuck", "Blizzard", true);
      	TableTennisPlayer player2("Tara", "Boomdea", false);
      
      	player1.Name();
      	if (player1.HasTable())
      		cout << ": has a table.\n";
      	else
      		cout << ": hasn't a table.\n";
      
      	player2.Name();
      	if (player2.HasTable())
      		cout << ": has a table.\n";
      	else
      		cout << ": hasn't a table.\n";
      
      	return 0;
      }
      ```

  * ç»“æœï¼š

    * ```c++
      Blizzard, Chuck: has a table.
      Boomdea, Tara: hasn't a table.
      ```

    * æ³¨æ„åˆ°è¯¥ç¨‹åºå®ä¾‹åŒ–å¯¹è±¡æ—¶å°† C-é£æ ¼å­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ï¼š

      * ```c++
        TableTennisPlayer player1("Chuck", "Blizzard", true);
        TableTennisPlayer player2("Tara", "Boomdea", false);
        ```

      * ä½†æ„é€ å‡½æ•°çš„å½¢å‚ç±»å‹è¢«å£°æ˜ä¸º const string &ã€‚è¿™å¯¼è‡´ç±»å‹ä¸åŒ¹é…ï¼Œä½†ä¸ç¬¬12ç« åˆ›å»ºçš„ String ç±»ä¸€æ ·ï¼Œstring ç±»æœ‰ä¸€ä¸ªå°† const char * ä½œä¸ºå‚æ•°çš„æ„é€ å‡½æ•°ï¼Œä½¿ç”¨C-é£æ ¼å­—ç¬¦ä¸²åˆå§‹åŒ– string å¯¹è±¡æ—¶ï¼Œå°†è‡ªåŠ¨è°ƒç”¨è¿™ä¸ªæ„é€ å‡½æ•°ã€‚

      * æ€»ä¹‹ï¼Œ**å¯å°† string å¯¹è±¡æˆ–C-é£æ ¼å­—ç¬¦ä¸²ä½œä¸ºæ„é€ å‡½æ•° TableTennisPlayer çš„å‚æ•°**ï¼š

        * å°†å‰è€…ä½œä¸ºå‚æ•°æ—¶ï¼Œå°†è°ƒç”¨æ¥å— const string & ä½œä¸ºå‚æ•°çš„ string æ„é€ å‡½æ•°ï¼›
        * è€Œå°†åè€…ä½œä¸ºå‚æ•°æ—¶ï¼Œå°†è°ƒç”¨æ¥å— const char* ä½œä¸ºå‚æ•°çš„ string æ„é€ å‡½æ•°ã€‚

#### 13.1.1 æ´¾ç”Ÿä¸€ä¸ªç±»

Webtown ä¿±ä¹éƒ¨çš„ä¸€äº›æˆå‘˜**æ›¾ç»**å‚åŠ è¿‡å½“åœ°çš„ä¹’ä¹“çƒé”¦æ ‡èµ›ï¼šéœ€è¦è¿™æ ·ä¸€ä¸ªç±»ï¼Œå®ƒèƒ½åŒ…æ‹¬æˆå‘˜åœ¨æ¯”èµ›ä¸­çš„æ¯”åˆ†ã€‚

* ä¸å…¶ä»é›¶å¼€å§‹ï¼Œä¸å¦‚ä» TableTennisClass ç±»æ´¾ç”Ÿå‡ºä¸€ä¸ªç±»ã€‚é¦–å…ˆå°† RatedPlayer ç±»å£°æ˜ä¸ºä» TableTennisClass ç±»æ´¾ç”Ÿè€Œæ¥ï¼š

  * ```c++
    // RatedPlayer derives from the TableTennisPlayer base class
    class RatedPlayer : public TableTennisPlayer
    {
    ...
    };
    ```

  * å†’å·æŒ‡å‡º RatedPlayer ç±»çš„åŸºç±»æ˜¯ public TableTennisPlayer ç±»ã€‚

  * â€œclass RatedPlayer : public TableTennisPlayerâ€ç‰¹æ®Šçš„å£°æ˜å¤´è¡¨æ˜ TableTennisPlayer æ˜¯ä¸€ä¸ªå…¬æœ‰åŸºç±»ï¼Œè¿™è¢«ç§°ä¸ºå…¬æœ‰æ´¾ç”Ÿã€‚

    * æ´¾ç”Ÿç±»å¯¹è±¡åŒ…å«åŸºç±»å¯¹è±¡ï¼›
    * ä½¿ç”¨å…¬æœ‰æ´¾ç”Ÿï¼š
      * åŸºç±»çš„å…¬æœ‰æˆå‘˜å°†æˆä¸ºæ´¾ç”Ÿç±»çš„å…±æœ‰æˆå‘˜ï¼›
      * åŸºç±»çš„ç§æœ‰éƒ¨åˆ†ç§°ä¸ºæ´¾ç”Ÿç±»çš„ä¸€éƒ¨åˆ†ï¼Œä½†åªèƒ½é€šè¿‡åŸºç±»çš„å…¬æœ‰å’Œä¿æŠ¤æ–¹æ³•è®¿é—®ã€‚

  * RatedPlayer å¯¹è±¡å°†å…·æœ‰ä»¥ä¸‹ç‰¹å¾ï¼š

    * æ´¾ç”Ÿç±»å¯¹è±¡å‚¨å­˜äº†åŸºç±»çš„æ•°æ®æˆå‘˜ï¼ˆæ´¾ç”Ÿç±»ç»§æ‰¿äº†åŸºç±»çš„å®ç°ï¼‰ï¼›
    * æ´¾ç”Ÿç±»å¯¹è±¡å¯ä»¥ä½¿ç”¨åŸºç±»çš„æ–¹æ³•ï¼ˆæ´¾ç”Ÿç±»ç»§æ‰¿äº†åŸºç±»çš„æ¥å£ï¼‰ã€‚
    * å› æ­¤ï¼ŒRatedPlayer å¯¹è±¡å¯ä»¥å‚¨å­˜è¿åŠ¨å‘˜çš„å§“ååŠå…¶æ˜¯å¦æœ‰çƒæ¡Œï¼Œå¦å¤–è¿˜å¯ä»¥ä½¿ç”¨ T ç±»çš„Name()ã€hasTable()ã€ResetTable()æ–¹æ³•ï¼š
      * ![image](https://github.com/CoderSuHang/Cpp-Primer-Plus-Notes/assets/104765251/3dc3f49a-a1a3-490d-9ed5-5ecbb3b498fe)

  * éœ€è¦å†ç»§æ‰¿ç‰¹æ€§ä¸­æ·»åŠ ä»€ä¹ˆå‘¢ï¼š

    * æ´¾ç”Ÿç±»éœ€è¦è‡ªå·±çš„æ„é€ å‡½æ•°ã€‚

    * æ´¾ç”Ÿç±»å¯ä»¥æ ¹æ®éœ€è¦æ·»åŠ é¢å¤–çš„æ•°æ®æˆå‘˜å’Œæˆå‘˜å‡½æ•°ã€‚

    * åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæ´¾ç”Ÿç±»éœ€è¦å¦ä¸€ä¸ªæ•°æ®æˆå‘˜æ¥å­˜å‚¨æ¯”åˆ†ï¼Œè¿˜åº”åŒ…å«æ£€ç´¢æ¯”åˆ†çš„æ–¹æ³•å’Œé‡ç½®æ¯”åˆ†çš„æ–¹æ³•ã€‚å› æ­¤ï¼Œç±»å£°æ˜ä¸ä¸‹é¢ç±»ä¼¼ï¼š

      * ```c++
        // simple detived class
        class RatedPlayer : public TableTennisPlayer
        {
        private:
            unsigned int rating;	// add a data member
        public:
            RatedPlayer (unsigned int r = 0, const string & fn = "none", const string& ln = "none", bool ht = false);
            RatedPlayer (unsigned int r, const TableTennisPlayer & tp);
            unsigned int Rating () const { return rating; }		// add a method
            void ResetRating (unsigned int r) { rating = r; }	// add a method
        };
        ```

#### 13.1.2 æ„é€ å‡½æ•°ï¼šè®¿é—®æƒé™çš„è€ƒè™‘

ğŸ“Œæ´¾ç”Ÿç±»ä¸èƒ½ç›´æ¥è®¿é—®åŸºç±»çš„ç§æœ‰æˆå‘˜ï¼Œè€Œå¿…é¡»é€šè¿‡åŸºç±»æ–¹è¿›è¡Œè®¿é—®ã€‚å…·ä½“åœ°è¯´ï¼Œæ´¾ç”Ÿç±»æ„é€ å‡½æ•°å¿…é¡»ä½¿ç”¨åŸºç±»æ„é€ å‡½æ•°ã€‚

åˆ›å»ºæ´¾ç”Ÿå¯¹è±¡æ—¶ï¼Œç¨‹åºé¦–å…ˆåˆ›å»ºåŸºç±»å¯¹è±¡ï¼š

* ```c++
  RatedPlayer::RatedPlayer(unsigned int r, const string & fn,
                          const string & ln, bool ht) : TableTennisPlayer(fn, 
                          ln, ht)
  {
      rating = r;
  }
  ```

* å…¶ä¸­ï¼šTableTennisPlayer(fn, ln, ht)æ˜¯æˆå‘˜åˆå§‹åŒ–åˆ—è¡¨ã€‚

