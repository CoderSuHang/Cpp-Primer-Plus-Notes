## ç¬¬å››ç«  å¤åˆç±»å‹

### 4.1 æ•°ç»„

* æ•°ç»„æ˜¯ä¸€ç§æ•°æ®æ ¼å¼ï¼Œèƒ½å¤Ÿå‚¨å­˜å¤šä¸ªåŒç±»å‹çš„å€¼ï¼š

  * ä¾‹å¦‚ï¼Œæ•°ç»„å¯ä»¥å‚¨å­˜60ä¸ªintç±»å‹çš„å€¼ã€‚
  * åˆ›å»ºæ•°ç»„æ—¶ï¼Œéœ€è¦å¦‚ä¸‹å£°æ˜ï¼š
    * å‚¨å­˜åœ¨æ¯ä¸ªå…ƒç´ ä¸­çš„å€¼çš„ç±»å‹ï¼›
    * æ•°ç»„åï¼›
    * æ•°ç»„ä¸­çš„å…ƒç´ ã€‚
  * å£°æ˜æ•°ç»„çš„é€šç”¨æ ¼å¼ï¼š
    * *typeName* arratName[arraySize];
    * short months[12];
    * è¿™é‡Œè¦`æ³¨æ„`ï¼šæœ€åä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•æ¯”æ•°ç»„é•¿åº¦å°1ï¼š
      * ![image](https://github.com/CoderSuHang/Cpp-Primer-Plus-Notes/assets/104765251/28300dd4-694f-48a2-850b-57f1af0da040)


* ä¾‹ç¨‹ï¼š

  * ``` c++
    // arrayone.cpp -- small arrays of integers
    #include <iostream>
    int main() {
    	using namespace std;
    	int yams[3];
    	yams[0] = 7;
    	yams[1] = 8;
    	yams[2] = 6;
    
    	int yamcosts[3] = {20, 30, 5 };
    
    	cout << "Total yams = ";
    	cout << yams[0] + yams[1] + yams[2] << endl;
    	cout << "The package with " << yams[1] << " yams costs ";
    	cout << yamcosts[1] << " cents per yam.\n";
    	
    	int total = yams[0] * yamcosts[0] + yams[1] * yamcosts[1];
    	total = total + yams[2] * yamcosts[2];
    	cout << "The total yam expense is " << total << " cents.\n";
    
    	cout << "\nSize of yams array = " << sizeof yams;
    	cout << " bytes.\n";
    	cout << "Size of one element = " << sizeof yams[0];
    	cout << " bytes.\n";
    	return 0;
    }
    ```

* ç»“æœï¼š

  * ``` c++
    Total yams = 21
    The package with 8 yams costs 30 cents per yam.
    The total yam expense is 410 cents.
    
    Size of yams array = 12 bytes.
    Size of one element = 4 bytes.
    ```

#### 4.1.1 ç¨‹åºè¯´æ˜

* ç”³æ˜æ•°ç»„æ—¶ï¼Œå¯ä»¥ç»™æ•°ç»„å…ƒç´ èµ‹å€¼ï¼š

  * ``` c++
    int yamcosts[3] = {20, 30, 5 };
    ```

* sizeofè¿ç®—ç¬¦è¿”å›ç±»å‹æˆ–æ•°æ®å¯¹è±¡çš„é•¿åº¦ï¼ˆå•ä½ä¸ºå­—èŠ‚ï¼‰ï¼š

  * å¦‚æœå°† sizeof ç”¨äºæ•°ç»„åï¼Œå¾—åˆ°çš„å°†æ˜¯æ•´ä¸ªæ•°ç»„ä¸­çš„å­—èŠ‚æ•°ã€‚
  * ä½†å¦‚æœå°† sizeof ç”¨äºæ•°ç»„å…ƒç´ ï¼Œåˆ™å¾—åˆ°çš„å°†æ˜¯å…ƒç´ çš„é•¿åº¦(å•ä½ä¸ºå­—èŠ‚)ã€‚

#### 4.1.2 æ•°ç»„çš„åˆå§‹åŒ–è§„åˆ™

* åªæœ‰åœ¨å®šä¹‰æ•°ç»„æ—¶æ‰èƒ½ä½¿ç”¨åˆå§‹åŒ–ï¼Œæ­¤åå°±ä¸èƒ½ä½¿ç”¨äº†ï¼Œä¹Ÿä¸èƒ½å°†ä¸€ä¸ªæ•°ç»„èµ‹ç»™å¦ä¸€ä¸ªæ•°ç»„ï¼š

  * ``` c++
    int cards[4] = {3, 6, 8, 10};  //okay
    int hand[4];			      //okay
    hand[4] = {5, 6, 7, 9};		  //not allowed
    hand = cards;  				  //not allowed
    ```

* `ä½†æ˜¯`ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹æ ‡åˆ†åˆ«ç»™æ•°ç»„ä¸­çš„å…ƒç´ èµ‹å€¼ã€‚

* åˆå§‹åŒ–æ•°ç»„æ—¶ï¼Œæä¾›çš„å€¼å¯ä»¥å°‘äºæ•°ç»„çš„å…ƒç´ æ•°ç›®ã€‚

* å¦‚æœåªå¯¹æ•°ç»„çš„ä¸€éƒ¨åˆ†è¿›è¡Œåˆå§‹åŒ–ï¼Œåˆ™ç¼–è¯‘å™¨å°†æŠŠå…¶ä»–å…ƒç´ è®¾ç½®ä¸º0ã€‚å› æ­¤ï¼Œå°†æ•°ç»„ä¸­æ‰€æœ‰çš„å…ƒç´ éƒ½åˆå§‹åŒ–ä¸º0éå¸¸ç®€å•ï¼š

  * åªè¦æ˜¾å¼åœ°å°†ç¬¬ä¸€ä¸ªå…ƒç´ åˆå§‹åŒ–ä¸º0,ç„¶åè®©ç¼–è¯‘å™¨å°†å…¶ä»–å…ƒç´ éƒ½åˆå§‹åŒ–ä¸º0å³å¯:

  * ``` c++
    long cards[400] = {0};  //okay
    ```

* å¦‚æœåˆå§‹åŒ–ä¸º{1}è€Œä¸æ˜¯{0}ï¼Œåˆ™ç¬¬ä¸€ä¸ªå…ƒç´ è¢«è®¾ç½®ä¸º1ï¼Œå…¶ä»–å…ƒç´ éƒ½è¢«è®¾ç½®ä¸º0ã€‚

* å¦‚æœåˆå§‹åŒ–æ•°ç»„æ—¶æ–¹æ‹¬å·å†…([])ä¸ºç©ºï¼ŒC++ç¼–è¯‘å™¨å°†è®¡ç®—å…ƒç´ ä¸ªæ•°ã€‚ä¾‹å¦‚ï¼Œå¯¹äºä¸‹é¢çš„å£°æ˜:

  * ``` c++
    int cards[] = {3, 6, 8, 10};  //okay
    ```



#### 4.1.3 C++11æ•°ç»„åˆå§‹åŒ–æ–¹æ³•

* C++11å°†ä½¿ç”¨å¤§æ‹¬å·çš„åˆå§‹åŒ–ï¼ˆåˆ—è¡¨åˆå§‹åŒ–ï¼‰ä½œä¸ºä¸€ç§é€šç”¨åˆå§‹åŒ–æ–¹å¼ï¼Œå¯ç”¨äºæ‰€æœ‰ç±»å‹ã€‚

* æ–°å¢åŠŸèƒ½ï¼š

  * 1ã€åˆå§‹åŒ–æ•°ç»„æ—¶ï¼Œå¯çœç•¥ç­‰å·ï¼ˆ=ï¼‰ï¼š

    * ``` c++
      double earnings[4] {1.2e4, 1.6e4, 1.1e4, 1.7e4};
      ```

  * 2ã€å¯ä¸åœ¨å¤§æ‹¬å·å†…åŒ…å«ä»»ä½•ä¸œè¥¿ï¼Œè¿™å°†æŠŠæ‰€æœ‰å…ƒç´ éƒ½è®¾ç½®ä¸º`é›¶`ï¼š

    * ``` c++
      unsigned int counts[10] = {};
      float balances[100] {};
      ```

  * 3ã€åˆ—è¡¨åˆå§‹åŒ–ç¦æ­¢ç¼©çª„è½¬æ¢,ï¼š

    * ``` c++
      long plifs[] = {25, 92, 3.0};  //å°†æµ®ç‚¹æ•°è½¬æ¢ä¸ºæ•´å‹æ˜¯ç¼©çª„æ“ä½œnot allowed
      char slifs[4] = {'h', 'i', 1122011, '\0'};  //1122011è¶…å‡ºäº†charå˜é‡çš„å–å€¼èŒƒå›´not allowed
      char tlifs[4] = {'h', 'i', 112, '\0'};  //å› ä¸ºè™½ç„¶112æ˜¯ä¸€ä¸ªintå€¼ï¼Œä½†å®ƒåœ¨ charå˜é‡çš„å–å–å€¼èŒƒå›´allowed
      ```



### 4.2 å­—ç¬¦ä¸²

* C-é£æ ¼å­—ç¬¦ä¸²ï¼ˆéœ€è¦åˆç©ºå­—ç¬¦ï¼ˆ\0ï¼‰ç»“å°¾ï¼‰-å†—é•¿ä¹å‘³ï¼š

  * ```c++
    char cat[8] = {'f', 'a', 't', 'e', 's', 's', 'a', '\0'};
    ```

* å­—ç¬¦ä¸²å¸¸é‡/å­—ç¬¦ä¸²å­—é¢å€¼ï¼ˆæ›´å¥½çš„å°†å­—ç¬¦æ•°ç»„åˆå§‹åŒ–ä¸ºå­—ç¬¦ä¸²çš„æ–¹æ³•ï¼‰ï¼š

  * ``` c++
    char bird[11] = "Mr. Cheeps";
    char fish[] = "Bubbles";
    ```

  * ç”¨å¼•å·æ‹¬èµ·çš„å­—ç¬¦ä¸²éšå¼åœ°åŒ…æ‹¬ç»“å°¾çš„ç©ºå­—ç¬¦ï¼Œå› æ­¤ä¸ç”¨æ˜¾å¼åœ°åŒ…æ‹¬å®ƒã€‚

* `æ³¨æ„`ï¼šå­—ç¬¦ä¸²å¸¸é‡ï¼ˆä½¿ç”¨åŒå¼•å·ï¼‰ä¸èƒ½ä¸å­—ç¬¦å¸¸é‡ï¼ˆä½¿ç”¨å•å¼•å·ï¼‰äº’æ¢ã€‚

  * å­—ç¬¦ä¸²å¸¸é‡ï¼ˆä½¿ç”¨åŒå¼•å·ï¼‰æ˜¯å­—ç¬¦ä¸²ç¼–ç çš„ç®€å†™è¡¨ç¤ºï¼š

    * ``` c++
      char shirt_size = 'S';//å°†83èµ‹ç»™shirt_size
      ```

  * "S"é™…ä¸Šè¡¨ç¤ºçš„æ˜¯å­—ç¬¦ä¸²æ‰€åœ¨çš„å†…å­˜åœ°å€ã€‚å› æ­¤ä¸‹é¢çš„è¯­å¥è¯•å›¾å°†ä¸€ä¸ªå†…å­˜åœ°å€èµ‹ç»™shirt_size:

    * ``` c++
      char shirt_size = "S";
      ```



#### 4.2.1 æ‹¼æ¥å­—ç¬¦ä¸²å¸¸é‡

* C++å…è®¸å‡­å€Ÿå­—ç¬¦ä¸²å­—é¢å€¼ï¼Œå³å°†ä¸¤ä¸ªç”¨å¼•å·æ‹¬èµ·çš„å­—ç¬¦ä¸²åˆå¹¶ä¸ºä¸€ä¸ªï¼š

  * ``` c++
    cout << "I'd gibe my right arm to be" " a great violinist.\n";
    cout << "I'd gibe my right arm to be a great violinist.\n";
    cout << "I'd gibe my right ar"
        "m to be a great violinist.\n";
    ```

  * `æ³¨æ„`ï¼šæ‹¼æ¥æ—¶ä¸ä¼šåœ¨è¢«è¿æ¥çš„å­—ç¬¦ä¸²ä¹‹é—´æ·»åŠ ç©ºæ ¼ï¼Œç¬¬äºŒä¸ªå­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ªå­—ç¬¦å°†ç´§è·Ÿåœ¨ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²çš„æœ€åä¸€ä¸ªå­—ç¬¦ï¼ˆä¸è€ƒè™‘\0ï¼‰åé¢ã€‚

  * ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­çš„\0å­—ç¬¦å°†è¢«ç¬¬äºŒä¸ªå­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ªå­—ç¬¦å–ä»£ã€‚



#### 4.2.2 åœ¨æ•°ç»„ä¸­ä½¿ç”¨å­—ç¬¦ä¸²

* å°†å­—ç¬¦ä¸²å‚¨å­˜åˆ°æ•°ç»„ä¸­çš„å¸¸ç”¨ä¸¤å¤§æ–¹æ³•ï¼š

  * 1ã€å°†æ•°ç»„åˆå§‹åŒ–ä¸ºå­—ç¬¦ä¸²å¸¸é‡ã€‚
  * 2ã€å°†é”®ç›˜æˆ–æ–‡ä»¶è¾“å…¥è¯»å…¥åˆ°æ•°ç»„ä¸­ã€‚

* ä¾‹ç¨‹ï¼š

  * ``` c++
    // strings.cpp -- storing strings in an array
    #include <iostream>
    #include <cstring>
    
    int main() {
    	using namespace std;
    	const int Size = 15;
    	char name1[Size];
    	char name2[Size] = "C++owboy";
    
    	cout << "Howdy! I'm " << name2;
    	cout << "! What's your name?\n";
    	cin >> name1;
    	cout << "Well, " << name1 << ", your name has ";
    	cout << strlen(name1) << " letters and is stored\n";
    	cout << "Your initial is " << name1[0] << ".\n";
    	name2[3] = '\0';
    	cout << "Here are the first 3 characters of my name: ";
    	cout << name2 << endl;
    	return 0;
    }
    ```

* ç»“æœï¼š

  * ``` c++
    Howdy! I'm C++owboy! What's your name?
    Basicman
    Well, Basicman, your name has 8 letters and is stored
    Your initial is B.
    Here are the first 3 characters of my name: C++
    ```

  * sizeofè¿ç®—ç¬¦èƒ½å¤ŸæŒ‡å‡ºæ•´ä¸ªæ•°ç»„çš„é•¿åº¦ï¼›

  * è€Œstrlen()å‡½æ•°èƒ½å¤Ÿè¿”å›å‚¨å­˜åœ¨æ•°ç»„ä¸­çš„å­—ç¬¦ä¸²é•¿åº¦ï¼ˆå¤šå°‘ä¸ªå¯è§å­—ç¬¦ï¼Œéç©ºå­—ç¬¦ï¼‰ï¼Œè€Œä¸æ˜¯æ•°ç»„æœ¬èº«çš„é•¿åº¦ï¼ˆ15å­—èŠ‚ï¼‰ã€‚

  * å°†name2[3]è®¾ç½®ä¸ºç©ºå­—ç¬¦ï¼Œä½¿å¾—è¾“å‡ºå­—ç¬¦ä¸²åœ¨ç¬¬ä¸‰ä¸ªå­—ç¬¦åå³ç»“æŸã€‚

    * ![image](https://github.com/CoderSuHang/Cpp-Primer-Plus-Notes/assets/104765251/a0c71cfc-6909-4842-af1b-18abf9541cec)




#### 4.2.3 å­—ç¬¦ä¸²è¾“å…¥

* cinä½¿ç”¨ç©ºç™½æ¥ç¡®å®šå­—ç¬¦ä¸²çš„ç»“æŸä½ç½®ï¼Œå› æ­¤cinåœ¨è·å–å­—ç¬¦æ•°ç»„è¾“å…¥æ—¶åªè¯»å–ä¸€ä¸ªå•è¯ã€‚

* ä¾‹ç¨‹ï¼š

  * ``` c++
    // instr1.cpp -- reading more than one string
    #include <iostream>
    
    int main() {
    	using namespace std;
    
    	const int ArSize = 20;
    	char name[ArSize];
    	char dessert[ArSize];
    
    	cout << "Enter your name:\n";
    	cin >> name;
    	cout << "Enter your favorite dessert:\n";
    	cin >> dessert;
    	cout << "I have some delicious " << dessert;
    	cout << " for you, " << name << ".\n";
    	return 0;
    }
    ```

* ç»“æœï¼š

  * ``` c++
    Enter your name:
    Alistair Dreeb
    Enter your favorite dessert:
    I have some delicious Dreeb for you, Alistair.
    ```

* è§£å†³åŠæ³•ï¼šä¸‹å±Šå†…å®¹ï¼šé‡‡ç”¨é¢å‘è¡Œè€Œä¸æ˜¯é¢å‘å•è¯çš„æ–¹æ³•ï¼š



#### 4.2.4 æ¯æ¬¡è¯»å–ä¸€è¡Œå­—ç¬¦ä¸²è¾“å…¥

* getline()ï¼šè¯»å–ä¸€è¡Œè¾“å…¥ï¼Œä¸¢å¼ƒæ¢è¡Œç¬¦ï¼›

* get()ï¼šè¯»å–ä¸€è¡Œè¾“å…¥ï¼Œå°†æ¢è¡Œç¬¦ä¿ç•™åœ¨è¾“å…¥åºåˆ—ä¸­ã€‚

* 1ã€getline()ï¼š

  * è°ƒç”¨æ–¹æ³•ï¼š

    * cin.getline(name, 20);
    * è¯¥å‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼š
      * ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç”¨æ¥å­˜å‚¨è¾“å…¥è¡Œçš„æ•°ç»„çš„åç§°ï¼›
      * ç¬¬äºŒä¸ªå‚æ•°æ˜¯è¦è¯»å–çš„å­—ç¬¦æ•°ã€‚å¦‚æœè¿™ä¸ªå‚æ•°ä¸º20ï¼Œåˆ™å‡½æ•°æœ€å¤šè¯»å–19ä¸ªå­—ç¬¦ï¼Œä½™ä¸‹çš„ç©ºé—´ç”¨äºå­˜å‚¨è‡ªåŠ¨åœ¨ç»“å°¾å¤„æ·»åŠ çš„`ç©ºå­—ç¬¦`ã€‚
      * getline( )æˆå‘˜å‡½æ•°åœ¨è¯»å–æŒ‡å®šæ•°ç›®çš„å­—ç¬¦æˆ–é‡åˆ°æ¢è¡Œç¬¦æ—¶åœæ­¢è¯»å–ã€‚

  * ä¾‹ç¨‹ï¼š

    * ``` c++
      // instr2.cpp -- reading more than one word with getline
      #include <iostream>
      
      int main() {
      	using namespace std;
      
      	const int ArSize = 20;
      	char name[ArSize];
      	char dessert[ArSize];
      
      	cout << "Enter your name:\n";
      	cin.getline(name, ArSize);
      	cout << "Enter your favorite dessert:\n";
      	cin.getline(dessert, ArSize);
      	cout << "I have some delicious " << dessert;
      	cout << " for you, " << name << ".\n";
      	return 0;
      }
      ```

  * ç»“æœï¼š

    * ``` c++
      Enter your name:
      Dirk Hammernose
      Enter your favorite dessert:
      Radish Torte
      I have some delicious Radish Torte for you, Dirk Hammernose.
      ```

* 2ã€get()ï¼š

  * ç”±äºç¬¬ä¸€æ¬¡è°ƒç”¨åï¼Œæ¢è¡Œç¬¦å°†ç•™åœ¨è¾“å…¥é˜Ÿåˆ—ä¸­ï¼Œå› æ­¤ç¬¬äºŒæ¬¡è°ƒç”¨æ—¶çœ‹åˆ°çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ä¾¿æ˜¯æ¢è¡Œç¬¦ã€‚

  * å› æ­¤get()è®¤ä¸ºå·²åˆ°è¾¾è¡Œå°¾ï¼Œè€Œæ²¡æœ‰å‘ç°ä»»ä½•å¯è¯»å–çš„å†…å®¹ã€‚å¦‚æœä¸å€ŸåŠ©äºå¸®åŠ©ï¼Œget()å°†ä¸èƒ½è·¨è¿‡è¯¥æ¢è¡Œç¬¦ï¼š

    * ``` c++ 
      cin.get(name, ArSize);
      cin.get(dessert, ArSize); //problem
      ```

  * è§£å†³åŠæ³•ï¼š

    * 1ã€ä½¿ç”¨ä¸å¸¦ä»»ä½•å‚æ•°çš„cin.get()è°ƒç”¨ï¼š

      * ``` c++
        cin.get(name, ArSize);
        cin.get();
        cin.get(dessert, ArSize); 
        ```

    * 2ã€ä½¿ç”¨get()æ–¹å¼å°†ä¸¤ä¸ªç±»æˆå‘˜å‡½æ•°æ‹¼æ¥ï¼š

      * ```c++
        cin.get(name, ArSize).get();
        cin.getline(name1, ArSize).getline(name2, ArSize);
        ```

  * ä¾‹ç¨‹ï¼š

    * ``` c++
      // instr3.cpp -- reading more than one word with get() & get()
      #include <iostream>
      
      int main() {
      	using namespace std;
      
      	const int ArSize = 20;
      	char name[ArSize];
      	char dessert[ArSize];
      
      	cout << "Enter your name:\n";
      	cin.get(name, ArSize).get();
      	cout << "Enter your favorite dessert:\n";
      	cin.get(dessert, ArSize).get();
      	cout << "I have some delicious " << dessert;
      	cout << " for you, " << name << ".\n";
      	return 0;
      }
      ```

  * ç»“æœï¼š

    * ``` c++\
      Enter your name:
      Mai Parfait
      Enter your favorite dessert:
      Chocolate Mousse
      I have some delicious Chocolate Mousse for you, Mai Parfait.
      ```

  * ç»“è®ºï¼šgetline()ä½¿ç”¨èµ·æ¥ç®€å•ä¸€äº›ï¼Œä½†get()ä½¿å¾—æ£€æŸ¥é”™è¯¯æ›´ç®€å•äº›ã€‚

* 3ã€ç©ºè¡Œå’Œå…¶ä»–é—®é¢˜ï¼š
  * å½“get()è¯»å–ç©ºè¡Œåå°†è®¾ç½®å¤±æ•ˆä½ã€‚å³æ¥ä¸‹æ¥çš„è¾“å…¥å°†è¢«é˜»æ–­ï¼Œä½†å¯ä»¥ç”¨ä¸‹é¢çš„å‘½ä»¤æ¥æ¢å¤è¾“å…¥ï¼š
    * cin.clear();
  * è¾“å…¥å­—ç¬¦ä¸²å¯èƒ½æ¯”åˆ†é…çš„ç©ºé—´é•¿ï¼š
    * getline()å’Œget()å°†æŠŠä½™ä¸‹çš„å­—ç¬¦ç•™åœ¨è¾“å…¥é˜Ÿåˆ—ä¸­ï¼›
    * è€Œgetline()è¿˜ä¼šè®¾ç½®å®æ•ˆä½ï¼Œå¹¶å…³é—­åé¢çš„è¾“å…¥ã€‚



#### 4.2.5 æ··åˆè¾“å…¥å­—ç¬¦ä¸²å’Œæ•°å­—

* ä¾‹ç¨‹ï¼š

  * ``` c++
    // numstr.cpp -- following number input with line input
    #include <iostream>
    
    int main() {
    	using namespace std;
    	cout << "What year was your house built?\n";
    	int year;
    	cin >> year;
    	cin.get();
    	cout << "What is its street address?\n";
    	char address[80];
    	cin.getline(address, 80);
    	cout << "Year built: " << year << endl;
    	cout << "Address: " << address << endl;
    	cout << "Done!\n";
    	return 0;
    }
    ```

* ç»“æœï¼š

  * ``` c++
    What year was your house built?
    2000
    What is its street address?
    Beihang University
    Year built: 2000
    Address: Beihang University
    Done!
    ```

  * å¦‚æœä¸åŠ cin.get()ï¼›ä»£ç å°±ä¼šæŠŠè¾“å…¥å®Œæ•°å­—åçš„å›è½¦è½¬æ¢ä¸ºæ¢è¡Œç¬¦ç•™åœ¨è¾“å…¥é˜Ÿåˆ—ä¸­ï¼Œå½“cin.getline()è¿›è¡Œæ—¶ï¼Œä¼šè®¤ä¸ºæ¢è¡Œç¬¦æ˜¯ç©ºè¡Œï¼Œå°†ç©ºå­—ç¬¦ä¼ ç»™ç›®æ ‡æ•°ç»„ã€‚



### 4.3 stringç±»ç®€ä»‹

* å¯ä»¥ç”¨stringç±»å‹çš„å˜é‡æ¥å‚¨å­˜å­—ç¬¦ä¸²ï¼Œè€Œä¸æ˜¯å­—ç¬¦æ•°ç»„ã€‚

* stringç±»æ›´æ–¹ä¾¿ï¼ŒåŒæ—¶æä¾›äº†å°†å­—ç¬¦ä¸²ä½œä¸ºä¸€ç§æ•°æ®ç±»å‹çš„è¡¨ç¤ºæ–¹æ³•ã€‚

* ä¾‹ç¨‹ï¼š

  * ``` c++
    // strtype1.cpp -- using the C++ string class
    #include <iostream>
    #include <string>
    
    int main() {
    	using namespace std;
    	char charr1[20];
    	char charr2[20] = "jaguar";
    	string str1;
    	string str2 = "panther";
    
    	cout << "Enter a kind of feline: ";
    	cin >> charr1;
    	cout << "Enter another kind of feline: ";
    	cin >> str1;
    	
    	cout << "Here are some kind of felines:\n";
    	cout << charr1 << " " << charr2 << " "
    		 << str1 << " " << str2 << endl;
    	cout << "The third letter in " << charr2 << " is "
    		 << charr2[2] << endl;
    	cout << "The third letter in " << str2 << " is "
    		<< str2[2] << endl;
    	return 0;
    }
    ```

* ç»“æœï¼š

  * ``` c++
    Enter a kind of feline: ocelot
    Enter another kind of feline: tiger
    Here are some kind of felines:
    ocelot jaguar tiger panther
    The third letter in jaguar is g
    The third letter in panther is n
    ```

  * ä½¿ç”¨stringå¯¹è±¡çš„æ–¹å¼ä¸ä½¿ç”¨å­—ç¬¦æ•°ç»„åŸºæœ¬ç›¸åŒï¼›

  * ä¸»è¦å´åˆ«åœ¨äºï¼š

    * å¯ä»¥å°†stingå¯¹è±¡å£°æ˜ä¸ºç®€å•å˜é‡ï¼Œè€Œä¸æ˜¯æ•°ç»„ï¼š
      * string str1;
      * string str2 =  "panther";
    * ç±»è®¾è®¡èƒ½å¤Ÿè®©ç¨‹åºè‡ªåŠ¨å¤„ç†stringçš„å¤§å°ï¼Œä½¿å¾—ä¸ä½¿ç”¨æ•°ç»„ç›¸æ¯”ï¼Œæ›´æ–¹ä¾¿ä¹Ÿæ›´å®‰å…¨ã€‚



### 4.3 stringç±»ç®€ä»‹

* å¯ä»¥ç”¨stringç±»å‹çš„å˜é‡æ¥å‚¨å­˜å­—ç¬¦ä¸²ï¼Œè€Œä¸æ˜¯å­—ç¬¦æ•°ç»„ã€‚

* stringç±»æ›´æ–¹ä¾¿ï¼ŒåŒæ—¶æä¾›äº†å°†å­—ç¬¦ä¸²ä½œä¸ºä¸€ç§æ•°æ®ç±»å‹çš„è¡¨ç¤ºæ–¹æ³•ã€‚

* ä¾‹ç¨‹ï¼š

  * ``` c++
    // strtype1.cpp -- using the C++ string class
    #include <iostream>
    #include <string>
    
    int main() {
    	using namespace std;
    	char charr1[20];
    	char charr2[20] = "jaguar";
    	string str1;
    	string str2 = "panther";
    
    	cout << "Enter a kind of feline: ";
    	cin >> charr1;
    	cout << "Enter another kind of feline: ";
    	cin >> str1;
    	
    	cout << "Here are some kind of felines:\n";
    	cout << charr1 << " " << charr2 << " "
    		 << str1 << " " << str2 << endl;
    	cout << "The third letter in " << charr2 << " is "
    		 << charr2[2] << endl;
    	cout << "The third letter in " << str2 << " is "
    		<< str2[2] << endl;
    	return 0;
    }
    ```

* ç»“æœï¼š

  * ``` c++
    Enter a kind of feline: ocelot
    Enter another kind of feline: tiger
    Here are some kind of felines:
    ocelot jaguar tiger panther
    The third letter in jaguar is g
    The third letter in panther is n
    ```

  * ä½¿ç”¨stringå¯¹è±¡çš„æ–¹å¼ä¸ä½¿ç”¨å­—ç¬¦æ•°ç»„åŸºæœ¬ç›¸åŒï¼›

  * ä¸»è¦å´åˆ«åœ¨äºï¼š

    * å¯ä»¥å°†stingå¯¹è±¡å£°æ˜ä¸ºç®€å•å˜é‡ï¼Œè€Œä¸æ˜¯æ•°ç»„ï¼š
      * string str1;
      * string str2 =  "panther";
    * ç±»è®¾è®¡èƒ½å¤Ÿè®©ç¨‹åºè‡ªåŠ¨å¤„ç†stringçš„å¤§å°ï¼Œä½¿å¾—ä¸ä½¿ç”¨æ•°ç»„ç›¸æ¯”ï¼Œæ›´æ–¹ä¾¿ä¹Ÿæ›´å®‰å…¨ã€‚



#### 4.3.1 C++11 å­—ç¬¦ä¸²åˆå§‹åŒ–

``` c++
char first_data[] = {"Le Chapon Dodu"};
char second_data[] {"Le Chapon Dodu"};
char third_data = {"Le Chapon Dodu"};
char fourth_data {"Le Chapon Dodu"};
```



#### 4.3.2 èµ‹å€¼ã€æ‹¼æ¥å’Œé™„åŠ 

* 1ã€èµ‹å€¼ï¼š

  * å¯ä»¥å°†ä¸€ä¸ªstringå¯¹è±¡èµ‹ç»™å¦ä¸€ä¸ªstringå¯¹è±¡ï¼Œä½†æ•°ç»„ä¸èƒ½èµ‹ç»™å¦ä¸€ä¸ªæ•°ç»„ï¼š

  * ```C++
    char charr1[20];
    char cahrr2[20] = "jaguar";
    string str1;
    string str2 = "panther";
    charr1 = charr2;//x INVALID
    str1 = str2;//VALID
    ```

* 2ã€æ‹¼æ¥å’Œé™„åŠ ï¼š

  * å¯ä»¥ä½¿ç”¨è¿ç®—ç¬¦+å°†ä¸¤ä¸ªstringå¯¹è±¡åˆå¹¶

  * ä¹Ÿå¯ä»¥ç”¨+=å°†å­—ç¬¦ä¸²é™„åŠ åˆ°stringå¯¹è±¡çš„æœ«å°¾

  * ``` c++
    string str3;
    str3 = str1 + str2;
    str1 += str2;
    ```

* ä¾‹ç¨‹ï¼š

  * ``` c++
    // strtype2.cpp -- assigning, adding, and appending
    #include <iostream>
    #include <string>
    int main() {
    	using namespace std;
    	string s1 = "penguin";
    	string s2, s3;
    
    	cout << "You can assign one string object to another: s2 = s1\n";
    	s2 = s1;
    	cout << "s1: " << s1 << ", s2: " << s2 << endl;
    	cout << "You can assign a C-style sring to a string object.\n";
    	cout << "s2 = \"buzzard\"\n";
    	s2 = "buzzard";
    	cout << "s2: " << s2 << endl;
    	cout << "You can concatenate strings: s3 = s1 + s2\n";
    	s3 = s1 + s2;
    	cout << "s3: " << s3 << endl;
    	cout << "You can cappend strings.\n";
    	s1 += s2;
    	cout << "s1 += s2 yields s1 = " << s1 << endl;
    	s2 += " for a day";
    	cout << "s2 += \" for a day\" yields s2 = " << s2 << endl;
    
    	return 0;
    }
    ```

* ç»“æœï¼š

  * ``` c++
    You can assign one string object to another: s2 = s1
    s1: penguin, s2: penguin
    You can assign a C-style sring to a string object.
    s2 = "buzzard"
    s2: buzzard
    You can concatenate strings: s3 = s1 + s2
    s3: penguinbuzzard
    You can cappend strings.
    s1 += s2 yields s1 = penguinbuzzard
    s2 += " for a day" yields s2 = buzzard for a day
    ```



#### 4.3.3 string ç±»çš„å…¶ä»–ç±»å‹

* å¤´æ–‡ä»¶cstringæä¾›äº†ç»™å­—ç¬¦ä¸²èµ‹å€¼ç­‰å·¥ä½œçš„å‡½æ•°ï¼š

  * strcpy()å°†å­—ç¬¦ä¸²èµ‹å€¼åˆ°å­—ç¬¦æ•°ç»„ä¸­ï¼›
  * strcat()å°†å­—ç¬¦ä¸²é™„åŠ åˆ°å­—ç¬¦æ•°ç»„æœ«å°¾ï¼›

* ä¾‹ç¨‹ï¼š

  * ``` c++
    // strtype3.cpp -- more string class features
    #define _CRT_SECURE_NO_WARNINGS
    #include <iostream>
    #include <string>
    #include <cstring>
    int main() {
    	using namespace std;
    	char charr1[20];
    	char charr2[20] = "jaguar";
    	string str1;
    	string str2 = "panther";
    
    	str1 = str2;
    	strcpy(charr1, charr2);
    
    	str1 += " paste";
    	strcat(charr1, " juice");
    
    	int len1 = str1.size();
    	int len2 = strlen(charr1);
    
    	cout << "The string " << str1 << " contains "
    		 << len1 << " characters.\n";
    	cout << "The string " << charr1 << " contains "
    		<< len2 << " characters.\n";
    
    	return 0;
    }
    ```

* ç»“æœï¼š

  * ``` c++
    The string panther paste contains 13 characters.
    The string jaguar juice contains 12 characters.
    ```

  * ä½¿ç”¨å­—ç¬¦æ•°ç»„æ—¶ï¼Œæ€»æ˜¯å­˜åœ¨ç›®æ ‡æ•°ç›®è¿‡å°ï¼Œæ— æ³•å‚¨å­˜æŒ‡å®šä¿¡æ¯çš„å±é™©ï¼š

    * strcat()è§†å›¾å°†å…¨éƒ¨å­—ç¬¦å¤åˆ¶åˆ°ç›®æ ‡æ•°ç»„ä¸­ï¼Œè¿™å°†è¦†ç›–ç›¸é‚»çš„å†…å­˜ï¼Œå¯èƒ½å¯¼è‡´ç¨‹åºç»ˆæ­¢ã€‚
    * è€Œstringç±»å…·æœ‰è‡ªåŠ¨è°ƒæ•´å¤§å°çš„åŠŸèƒ½ã€‚

  * ç¡®å®šå­—ç¬¦ä¸²ä¸­å­—ç¬¦æ•°çš„æ–¹æ³•ï¼š

    * ``` c++
      int len1 = str1.size();
      int len2 = strlen(charr1);
      ```

    * è€ŒC++ string ç±»å¯¹è±¡ä½¿ç”¨å¯¹è±¡åå’Œå¥ç‚¹è¿ç®—ç¬¦æ¥æŒ‡å‡ºè¦ä½¿ç”¨å“ªä¸ªå­—ç¬¦ä¸²ã€‚



#### 4.3.4 string ç±» I/O

* ä¾‹ç¨‹ï¼š

  * ``` c++
    // strtype4.cpp -- line input
    #include <iostream>
    #include <string>
    #include <cstring>
    
    int main() {
    	using namespace std;
    	char charr[20];
    	string str;
    
    	cout << "Length of string in charr before input: "
    		 << strlen(charr) << endl;
    	cout << "Length of string in str before input: "
    	   	 << str.size() << endl;
    	cout << "Enter a line of text:\n";
    	cin.getline(charr, 20);
    	cout << "You entered: " << charr << endl;
    	cout << "Enter another line of text:\n";
    	getline(cin, str);
    	cout << "You entered: " << str << endl;
    	cout << "Length of string in charr after input: "
    	 	 << strlen(charr) << endl;
    	cout << "Length of string in str after input: "
    		 << str.size() << endl;
    
    	return 0;
    }
    ```

* ç»“æœï¼š

  * ``` c++
    Length of string in charr before input: 31
    Length of string in str before input: 0
    Enter a line of text:
    peanut butter
    You entered: peanut butter
    Enter another line of text:
    blueberry jam
    You entered: blueberry jam
    Length of string in charr after input: 13
    Length of string in str after input: 13
    ```

  * strlen()å‡½æ•°å¯¹äºæœªè¢«åˆå§‹åŒ–çš„æ•°æ®ï¼Œç¬¬ä¸€ä¸ªç©ºå­—ç¬¦å‡ºç°çš„ä½ç½®æ˜¯éšæœºçš„ï¼Œå› æ­¤å¾—åˆ°çš„æ•°ç»„é•¿åº¦å¾ˆå¯èƒ½ä¸ç”³æ˜ä¸åŒã€‚

  * str.size()èƒ½å¤Ÿè¯»å–æœªè¢«åˆå§‹åŒ–çš„stringå¯¹è±¡é•¿åº¦ï¼Œè¯¥é•¿åº¦è‡ªåŠ¨è¿™æ˜¯ä¸º0ï¼›

  * cin.getline(charr, 20)ï¼š

    * getlineæ˜¯istreamç±»çš„ä¸€ä¸ªç±»æ–¹æ³•ï¼›
    * cinæ˜¯istreamå¯¹è±¡
    * ï¼ˆ  ï¼Œï¼‰ä¸­ç¬¬ä¸€ä¸ªæ˜¯ç›®æ ‡æ•°ç»„ï¼Œç¬¬äºŒä¸ªæ˜¯å‚æ•°é•¿åº¦

  * getline(cin, str)ï¼š

    * è¿™é‡Œgetline()ä¸æ˜¯ç±»æ–¹æ³•
    * å®ƒå°†cinä½œä¸ºå‚æ•°ï¼ŒæŒ‡å‡ºåˆ°å“ªé‡Œå»æŸ¥æ‰¾è¾“å…¥



#### 4.3.5 å…¶ä»–å½¢å¼çš„å­—ç¬¦ä¸²å­—é¢å€¼

|   ç±»å‹   | å‰ç¼€ |                  å¤‡æ³¨                   |
| :------: | :--: | :-------------------------------------: |
| wchar_t  |  L   | wchar_t title[] = L"Chief Astrogator";  |
| char16_t |  u   | char16_t name [] = u"Felonia Ripova" ;  |
| char32_t |  U   | char32_t car [] =U"Humber Super Snipe"; |
|   raw    |  R   |     cout << R"(xxx "xx" "\n"xxx)";      |

* é™¢å£«å­—ç¬¦ä¸²è¯­æ³•è¯­æ³•å…è®¸å†è¡¨ç¤ºå­—ç¬¦ä¸²å¼€å¤´çš„`"`å’Œ`(`ä¹‹é—´æ·»åŠ å…¶ä»–å­—ç¬¦

  * ä½¿ç”¨R"+* (æ ‡è¯†åŸå§‹å­—ç¬¦ä¸²çš„å¼€å¤´æ—¶ï¼Œå¿…é¡»ä½¿ç”¨)+*æ ‡è¯†åŸå§‹å­—ç¬¦ä¸²çš„

  * ```
    cout << R"+*("(Who wouldn't?)", she whispered.)+*" << endl;
    //out:"(Who wouldn't?)", she whispered.
    ```



### 4.4 ç»“æ„ç®€ä»‹

* ç»“æ„æ˜¯ä¸€ç§æ¯”æ•°ç»„æ›´çµæ´»çš„æ•°æ®æ ¼å¼ï¼Œå› ä¸ºåŒä¸€ä¸ªç»“æ„å¯ä»¥å‚¨å­˜å¤šç§ç±»å‹çš„æ•°æ®ï¼Œè¿™ä½¿å¾—èƒ½å¤Ÿå°†æœ‰å…³ç¯®çƒè¿åŠ¨å‘˜çš„ä¿¡æ¯æ”¾åœ¨ä¸€ä¸ªç»“æ„ä¸­ï¼Œä»è€Œå°†æ•°æ®çš„è¡¨ç¤ºåˆå¹¶åˆ°ä¸€èµ·ã€‚

* ç»“æ„çš„åˆ›å»ºï¼ˆ2æ­¥ï¼‰ï¼š

  * 1ã€å®šä¹‰ç»“æ„æè¿°ï¼šæè¿°å¹¶æ ‡è®°äº†èƒ½å¤Ÿå‚¨å­˜åœ¨ç»“æ„ä¸­çš„å„ç§æ•°æ®ç±»å‹ï¼›

    * ``` c++
      struct inflatable
      {
          char name[20];
          float volume;
          double price;
      };
      ```

    * ![image](https://github.com/CoderSuHang/Cpp-Primer-Plus-Notes/assets/104765251/d00c2ef2-ab79-4bff-8b76-c48aede396d6)


  * 2ã€æŒ‰æè¿°åˆ›å»ºç»“æ„å˜é‡:

    * ``` c++
      inflatable hat;
      inflatable woopie_cushion;
      inflatable mainframe;
      ```

    * C++ä¸­åˆ›å»ºç»“æ„å˜é‡å¯ä»¥çœç•¥structã€‚

    * ä¹‹åä¾¿å¯ä»¥ä½¿ç”¨hat.volumeè¿›è¡Œè®¿é—®å„ä¸ªæˆå‘˜ï¼Œhatæ˜¯ä¸€ä¸ªç»“æ„ï¼Œè€Œhat.volumeæ˜¯ä¸€ä¸ªcharå˜é‡ã€‚



#### 4.4.1 åœ¨ç¨‹åºä¸­ä½¿ç”¨ç»“æ„

* ä¾‹ç¨‹ï¼š

  * ``` c++
    // structur.cpp -- a simple structure
    #include <iostream>
    struct inflatable {
    	char name[20];
    	float volume;
    	double price;
    };
    
    int main() {
    	using namespace std;
    
    	inflatable guest = {
    		"Glorious Gloria",
    		1.88,
    		29.99
    	};
    
    	inflatable pal = {
    		"Audacious Arthur",
    		3.12,
    		32.99
    	};
    
    	cout << "Expand your gest list with " << guest.name;
    	cout << " and " << pal.name << "!\n";
    	cout << "You can have both for $";
    	cout << guest.price + pal.price << "!\n";
    
    	return 0;
    }
    ```

* ç»“æœï¼š

  * ``` c++
    Expand your gest list with Glorious Gloria and Audacious Arthur!
    You can have both for $62.98!
    ```

  * ç»“æ„å£°æ˜è¿™é‡Œé‡‡ç”¨å¤–éƒ¨å£°æ˜ï¼Œå£°æ˜æœ‰ä¸¤ç§æ–¹å¼ï¼Œé€šå¸¸é‡‡ç”¨å¤–éƒ¨å£°æ˜ã€‚

  * å˜é‡ä¹Ÿå¯ä»¥åœ¨å‡½æ•°å†…éƒ¨å’Œå¤–éƒ¨å®šä¹‰ï¼Œè¿™é‡Œæå€¡ä½¿ç”¨å¤–éƒ¨ç»“æ„å£°æ˜ï¼Œå†…éƒ¨å˜é‡å®šä¹‰ã€‚



#### 4.4.2 C++ ç»“æ„åˆå§‹åŒ–

* ä¸æ•°ç»„ä¸€æ ·ï¼ŒC++ä¹Ÿæ”¯æŒå°†åˆ—è¡¨åˆå§‹åŒ–ç”¨äºç»“æ„ï¼Œä¸”ç­‰å·æ˜¯å¯é€‰çš„ï¼š

  * ``` c++
    inflatable duck {"Daphne", 0.12, 9
                    98};
    ```

* å…¶æ¬¡ï¼Œå¦‚æœå¤§æ‹¬å·å†…æœªåŒ…å«ä»»ä½•ä¸œè¥¿ï¼Œå„ä¸ªæˆå‘˜éƒ½å°†è¢«è®¾ç½®ä¸ºé›¶ï¼š

  * ```c++
    inflatable mayor {};
    ```

* æœ€åï¼Œä¸å…è®¸ç¼©çª„è½¬æ¢ã€‚



#### 4.4.3 ç»“æ„å¯ä»¥å°†stringç±»ä½œä¸ºæˆå‘˜

* åªè¦æ‚¨ä½¿ç”¨çš„ç¼–è¯‘å™¨æ”¯æŒå¯¹ä»¥stringå¯¹è±¡ä½œä¸ºæˆå‘˜çš„ç»“æ„è¿›è¡Œåˆå§‹åŒ–ï¼Œå°±å¯ä»¥ã€‚

* ``` c++
  #include <string>
  struct inflatable{
    std::string name;
    float volume;
    double price;
  };
  ```



#### 4.4.4 å…¶ä»–ç»“æ„å±æ€§

* 1ã€å¯ä»¥å°†ç»“æ„ä½œä¸ºå‚æ•°ä¼ é€’ç»™å‡½æ•°ï¼Œä¹Ÿå¯ä»¥è®©å‡½æ•°è¿”å›ä¸€ä¸ªç»“æ„ï¼›

* 2ã€è¿˜å¯ä»¥ä½¿ç”¨èµ‹å€¼è¿ç®—ç¬¦ï¼ˆ=ï¼‰å°†ç»“æ„èµ‹ç»™å¦ä¸€ç§ç±»å‹çš„ç»“æ„ã€‚

* ä¾‹ç¨‹ï¼š

  * ```c++
    // assign_st -- assigning structures
    #include <iostream>
    struct inflatable{
    	char name[20];
    	float volume;
    	double price;
    };
    
    int main() {
    	using namespace std;
    	inflatable bouquet = {
    		"sunflowers",
    		0.20,
    		12.49
    	};
    
    	inflatable choice;
    	cout << "bouquet: " << bouquet.name << " for $";
    	cout << bouquet.price << endl;
    
    	choice = bouquet;
    	cout << "choice: " << choice.name << " for $";
    	cout << choice.price << endl;
    
    	return 0;
    }
    ```

* ç»“æœï¼š

  * ```c++
    bouquet: sunflowers for $12.49
    choice: sunflowersfor $12.49
    ```

  * å¯ä»¥åŒæ—¶å®Œæˆå®šä¹‰ç»“æ„å’Œåˆ›å»ºç»“æ„å˜é‡çš„å·¥ä½œï¼š

    * ``` c++
      struct perks
      {
          int key_number;
          char car[12];
      } mr_smith, ms_jones;
      
      //ç”šè‡³å¯ä»¥åˆå§‹åŒ–ï¼š
      struct perks
      {
          int key_number;
          char car[12];
      } mr_glitz = 
      {
          7,
          "Packard"
      };
      ```



#### 4.4.5 ç»“æ„æ•°ç»„

* å¯ä»¥åˆ›å»ºå…ƒç´ ä¸ºç»“æ„çš„æ•°ç»„ï¼š

  * ``` c++
    inflatable gifs[100];
    ```

  * è¿™æ ·å°±å°±å¯ä»¥ç†è§£ä¸ºåˆ›å»ºäº†ä¸€æ‰¹äººï¼Œä»–ä»¬æ‰‹ä¸Šå¯¹åº”ä¸åŒçš„ç‰©å“

  * å³ï¼šgiftsæ˜¯ä¸€ä¸ªinflatableæ•°ç»„ï¼Œå…¶ä¸­æ¯ä¸ªå…ƒç´ gifts[0]ã€gifts[1]éƒ½æ˜¯inflatableå¯¹è±¡ï¼Œå¯ä»¥è¿™æ ·ç”¨ï¼š

    * gifts[0].volume;
    * gifts[99].price;

* ç»“æ„æ•°ç»„åˆå§‹åŒ–ï¼š

  * ``` c++
    inflatable guests[2] = {
        {"Bambi", 0.5, 21.99},
        {"Godzilla", 2000, 565.99}
    };
    ```

* ä¾‹ç¨‹ï¼š

  * ```c++
    // arrstruc.cpp -- an arry of structures
    #include <iostream>
    struct inflatable {
    	char name[20];
    	float volume;
    	double price;
    };
    
    int main() {
    	using namespace std;
    	inflatable guests[2] = {
    		{"Bambi", 0.5, 21.99},
    		{"Godzilla", 2000, 565.99}
    	};
    
    	cout << "The guests " << guests[0].name << " and " << guests[1].name
    		<< "\nhave a combined volume of "
    		<< guests[0].volume + guests[1].volume << " cubic feet.\n";
    
    	return 0;
    }
    ```

* ç»“æœï¼š

  * ```c++
    The guests Bambi and Godzilla
    have a combined volume of 2000.5 cubic feet.
    ```



#### 4.4.6 ç»“æ„ä¸­çš„ä½å­—æ®µ

* C++ä¹Ÿå…è®¸æŒ‡å®šå ç”¨ç‰¹å®šä½æ•°çš„ç»“æ„æˆå‘˜ï¼š

* å­—æ®µçš„ç±»å‹åº”ä¸ºæ•´å‹æˆ–æšä¸¾ï¼Œæ¥ä¸‹æ¥æ˜¯å†’å·ï¼Œå†’å·åé¢æ˜¯ä¸€ä¸ªæ•°å­—ï¼ŒæŒ‡å®šäº†ä½¿ç”¨çš„ä½æ•°ã€‚

* ä¾‹ç¨‹ï¼š

  * ``` c++
    struct torgle_register{
        unsigned int SN : 4;
        unsigned int : 4;
        bool goodIn : 1;
        bool goodTorgle : 1;
    }
    ```



### 4.5 å…±ç”¨ä½“

* å…±ç”¨ä½“å’Œç»“æ„ä½“æœ‰ç›¸ä¼¼ä¹‹å¤„ï¼Œèƒ½å¤Ÿå‚¨å­˜ä¸åŒçš„æ•°æ®ç±»å‹ï¼Œä½†æ˜¯`åªèƒ½åŒæ—¶å‚¨å­˜å…¶ä¸­çš„ä¸€ç§ç±»å‹`ã€‚
* ç”±äºå…±ç”¨ä½“æ¯æ¬¡åªèƒ½å‚¨å­˜ä¸€ä¸ªå€¼ï¼Œå› æ­¤å…±ç”¨ä½“çš„é•¿åº¦ä¸ºå…¶æœ€å¤§æˆå‘˜çš„é•¿åº¦ã€‚
* ç”¨é€”ä¹‹ä¸€ï¼šå½“æ•°æ®é¡¹ä½¿ç”¨ä¸¤ç§æˆ–æ›´å¤šç§æ ¼å¼ï¼ˆä½†ä¸ä¼šåŒæ—¶ä½¿ç”¨æ—¶ï¼‰ï¼Œå¯ä»¥èŠ‚çœç©ºé—´ï¼š
  * ä¾‹å¦‚ç®¡ç†ä¸€ä¸ªå°å•†å“ç›®å½•ï¼Œå…¶ä¸­æœ‰ä¸€äº›å•†å“çš„IDä¸ºæ•´æ•°ï¼Œè€Œå¦ä¸€äº›IDä¸ºå­—ç¬¦ä¸²ã€‚è§P95ï¼Œå…±ç”¨ä½“ç”¨åœ¨äº†ç»“æ„çš„æˆå‘˜å½“ä¸­ï¼Œå› æ­¤å°±è¯´æ˜äº†å…±ç”¨ä½“æ˜¯ä¸€ç§æ•°æ®æ ¼å¼ã€‚
  * å…±ç”¨ä½“å¸¸ç”¨äº(ä½†å¹¶éåªèƒ½ç”¨äºï¼‰èŠ‚çœå†…å­˜ã€‚å½“å‰ï¼Œç³»ç»Ÿçš„å†…å­˜å¤šè¾¾æ•°GBç”šè‡³æ•°TBï¼Œå¥½åƒæ²¡æœ‰å¿…è¦èŠ‚çœå†…å­˜ï¼Œä½†å¹¶éæ‰€æœ‰çš„C++ç¨‹åºéƒ½æ˜¯ä¸ºè¿™æ ·çš„ç³»ç»Ÿç¼–å†™çš„ã€‚C++è¿˜ç”¨äºåµŒå…¥å¼ç³»ç»Ÿç¼–ç¨‹ï¼Œå¦‚æ§åˆ¶çƒ¤ç®±ã€MP3æ’­æ”¾å™¨æˆ–ç«æ˜Ÿæ¼«æ­¥è€…çš„å¤„ç†å™¨ã€‚å¯¹è¿™äº›åº”ç”¨ç¨‹åºæ¥è¯´ï¼Œå†…å­˜å¯èƒ½éå¸¸å®è´µã€‚å¦å¤–ï¼Œå…±ç”¨ä½“å¸¸ç”¨äºæ“ä½œç³»ç»Ÿæ•°æ®ç»“æ„æˆ–ç¡¬ä»¶æ•°æ®ç»“æ„ã€‚



### 4.6 æšä¸¾

* enumå·¥å…·æä¾›äº†å¦ä¸€ç§åˆ›å»ºç¬¦å·å¸¸é‡çš„æ–¹å¼ï¼Œè¿™ç§æ–¹å¼å¯ä»¥ä»£æ›¿constã€‚å®ƒè¿˜å¯ä»¥å®šä¹‰æ–°ç±»å‹ï¼Œä½†å¿…é¡»æŒ‰ä¸¥æ ¼çš„é™åˆ¶è¿›è¡Œï¼š

  * ``` c++
    enum spectrum {red, orange, yellow, green, blue, violet, indigo, ultraviolet};
    ```

  * è®© spectrumæˆä¸ºæ–°ç±»å‹çš„åç§°ï¼›spectrumè¢«ç§°ä¸ºæšä¸¾(enumeration)ï¼Œå°±åƒstructå˜é‡è¢«ç§°ä¸ºç»“æ„ä¸€æ ·ã€‚

  * å°†redã€ orangeã€yellowç­‰ä½œä¸ºç¬¦å·å¸¸é‡,å®ƒä»¬å¯¹åº”æ•´æ•°å€¼0~7ã€‚è¿™äº›å¸¸é‡å«ä½œæšä¸¾é‡( enumerator)ã€‚

  * å¯ä»¥ç”¨æšä¸¾åæ¥å£°æ˜è¿™ç§ç±»å‹çš„å˜é‡ï¼š

    * ``` c++ 
      spectrum band;
      ```



#### 4.6.1 è®¾ç½®æšä¸¾é‡çš„å€¼

* å¯ä»¥ä½¿ç”¨èµ‹å€¼è¿ç®—ç¬¦æ¥æ˜¾å¼åœ°è®¾ç½®æšä¸¾é‡çš„å€¼ï¼š

  * ```c++
    enum bits{one = 1, two = 2, four = 4, eight = 8};
    ```

* æŒ‡å®šçš„å€¼å¿…é¡»ä¸ºæ•´æ•°ã€‚ä¹Ÿå¯ä»¥åªæ˜¾å¼åœ°å®šä¹‰å…¶ä¸­ä¸€äº›æšä¸¾é‡çš„å€¼ï¼š

  * ``` c++
    enum bigstep{first, second = 100, third};
    ```

  * è¿™é‡Œï¼Œfirståœ¨é»˜è®¤æƒ…å†µä¸‹ä¸º0ã€‚åé¢æ²¡æœ‰è¢«åˆå§‹åŒ–çš„æšä¸¾é‡çš„å€¼å°†æ¯”å…¶å‰é¢çš„æšä¸¾é‡å¤§1ã€‚å³third=101ã€‚

* å¯ä»¥åˆ›å»ºå¤šä¸ªå€¼ç›¸åŒçš„æšä¸¾é‡ï¼š

  * ```c++
    enum {zero, null = 0, one, numero_uno = 1};
    ```



#### 4.6.2 æšä¸¾çš„å–å€¼èŒƒå›´

* è§P97



### 4.7 æŒ‡é’ˆå’Œè‡ªç”±å­˜å‚¨ç©ºé—´

* æŒ‡é’ˆæ˜¯ä¸€ä¸ªå˜é‡ï¼Œå…¶å‚¨å­˜çš„å¼å€¼å¾—åœ°å€ï¼Œè€Œä¸æ˜¯å€¼å¾—æœ¬èº«ã€‚

* å¯¹å˜é‡åº”ç”¨åœ°å€è¿ç®—ç¬¦å³å¯æ‰¾åˆ°å¸¸è§„å˜é‡å¾—åœ°å€ï¼š

  * ä¾‹ç¨‹ï¼š

    * ``` c++
      // address.cpp -- using the & operator to find addresses
      #include <iostream>
      
      int main() {
      	using namespace std;
      	int donuts = 6;
      	double cups = 4.5;
      
      	cout << "donuts value = " << donuts;
      	cout << " and donuts address = " << &donuts << endl;
      	cout << "cups value = " << cups;
      	cout << " and cups address = " << &cups << endl;
      
      	return 0;
      }
      ```

  * ç»“æœï¼š

    * ``` c++
      donuts value = 6 and donuts address = 00EFF6F4
      cups value = 4.5 and cups address = 00EFF6E4
      ```

* æŒ‡é’ˆåè¡¨ç¤ºçš„æ˜¯åœ°å€ã€‚*è¿ç®—ç¬¦å¯ä»¥å¾—åˆ°è¯¥åœ°å€å­˜å‚¨çš„å€¼ï¼š

  * ä¾‹ç¨‹ï¼š

    * ```c++
      // pointer.cpp -- our first pointer variable
      #include <iostream>
      int main() {
      	using namespace std;
      	int updates = 6;
      	int * p_updates;
      	p_updates = &updates;
      
      	cout << "Values: updates = " << updates;
      	cout << ", *p_updates = " << *p_updates << endl;
      
      	cout << "Addresses: &updates = " << &updates;
      	cout << ", p_updates = " << p_updates << endl;
      
      	*p_updates = *p_updates + 1;
      	cout << "Now updates = " << updates << endl;
      
      	return 0;
      }
      ```

  * ç»“æœï¼š

    * ```c++
      Values: updates = 6, *p_updates = 6
      Addresses: &updates = 00C4F884, p_updates = 00C4F884
      Now updates = 7
      ```

    * ![image](https://github.com/CoderSuHang/Cpp-Primer-Plus-Notes/assets/104765251/5b4687f0-f0ae-476a-9e97-bcfd28e291b2)




#### 4.7.1 å£°æ˜å’Œåˆå§‹åŒ–æŒ‡é’ˆ

* æŒ‡é’ˆå£°æ˜å¿…é¡»æŒ‡å®šæŒ‡é’ˆæŒ‡å‘çš„æ•°æ®ç±»å‹ï¼š
  * int * p_updates;
  * p_updatesçš„ç±»å‹æ˜¯æŒ‡å‘intçš„æŒ‡é’ˆ

* å¯¹äºæ¯ä¸ªæŒ‡é’ˆå˜é‡åï¼Œéƒ½éœ€è¦ä½¿ç”¨ä¸€ä¸ª*ï¼š

  * int* p1, p2;
  * è¯¥å£°æ˜åˆ›å»ºäº†ä¸€ä¸ªæŒ‡é’ˆï¼ˆp1ï¼‰å’Œä¸€ä¸ªintå˜é‡ï¼ˆp2ï¼‰

* ä¾‹ç¨‹ï¼š

  * ``` c++
    //int_ptr.cpp -- initialize a pointer
    #include <iostream>
    int main() {
    	using namespace std;
    	int higgens = 5;
    	int* pt = &higgens;
    
    	cout << "Value of higgens = " << higgens
    		 << "; Address of higgens = " << &higgens << endl;
    	cout << "Value of *pt = " << *pt
    		 << "; Address of pt = " << pt << endl;
    
    	return 0;
    }
    ```

* ç»“æœï¼š

  * ``` c++
    Value of higgens = 5; Address of higgens = 008FF954
    Value of *pt = 5; Address of pt = 008FF954
    ```

  * ç¨‹åºå°†piï¼ˆè€Œä¸æ˜¯*piï¼‰åˆå§‹åŒ–ä¸ºhiggensçš„åœ°å€ï¼š

    * ``` c++
      int* pt = &higgens;
      ```

    * ç­‰ä»·äºï¼š

    * ``` c++
      	int * pt;
      	pt = &higgens;
      ```



#### 4.7.2 æŒ‡é’ˆçš„å±é™©

* åœ¨C++ä¸­åˆ›å»ºæŒ‡é’ˆæ—¶ï¼Œè®¡ç®—æœºå°†åˆ†é…ç”¨æ¥å­˜å‚¨åœ°å€çš„å†…å­˜ï¼Œä½†ä¸ä¼šåˆ†é…ç”¨æ¥å­˜å‚¨æŒ‡é’ˆæ‰€æŒ‡å‘æ•°æ®å†…å­˜ã€‚



#### 4.7.3 æŒ‡é’ˆå’Œæ•°å­—

* æŒ‡é’ˆä¸æ˜¯æ•°å­—ï¼Œä¸èƒ½ç®€å•åœ°å°†æ•´æ•°èµ‹å€¼ç»™æŒ‡é’ˆï¼Œéœ€è¦å¼ºåˆ¶è½¬æ¢ï¼š

* ``` c++
  int* pt;
  pt - (int *) 0xB8000000;
  ```



#### 4.7.4 ä½¿ç”¨newæ¥åˆ†é…å†…å­˜

* ```c++
  int* pn = new int;
  ```

  * new int å‘Šè¯‰ç¨‹åºï¼Œéœ€è¦é€‚åˆå­˜å‚¨intçš„å†…å­˜ï¼Œnewè¿ç®—ç¬¦æ ¹æ®ç±»å‹æ¥ç¡®å®šéœ€è¦å¤šå°‘å­—èŠ‚çš„å†…å­˜ã€‚
  * ç„¶åæ‰¾åˆ°è¿™æ ·çš„å†…å­˜ï¼Œå¹¶è¿”å›è¯¥å†…å­˜å—çš„åœ°å€ã€‚

* ä¸ºä¸€ä¸ªæ•°æ®å¯¹è±¡ï¼ˆå¯ä»¥æ˜¯ç»“æ„ï¼Œä¹Ÿå¯ä»¥æ˜¯åŸºæœ¬ç±»å‹ï¼‰è·å¾—å¹¶æŒ‡å®šåˆ†é…å†…å­˜çš„é€šç”¨æ ¼å¼å¦‚ä¸‹:

  * ```c++
    typeName* pointer_name = new typeName;
    ```

* ä¾‹ç¨‹ï¼š

  * ```c++
    // use_new.cpp -- using the new operator
    #include <iostream>
    
    int main() {
    	using namespace std;
    	int nights = 1001;
    	int* pt = new int;
    	*pt = 1001;
    	
    	cout << "nights value = ";
    	cout << nights << ": location " << &nights << endl;
    	cout << "int ";
    	cout << "value = " << *pt << ": location = " << pt << endl;
    	double* pd = new double;
    	*pd = 10000001.0;
    
    	cout << "double ";
    	cout << "value = " << *pd << ": location = " << pd << endl;
    	cout << "location of pointer pd: " << &pd << endl;
    	cout << "size of pt = " << sizeof(pt);
    	cout << ": size of *pt = " << sizeof(*pt) << endl;
    	cout << "size of pd = " << sizeof(pd);
    	cout << ": size of *pd = " << sizeof(*pd) << endl;
    
    	return 0;
    }
    ```

* ç»“æœï¼š

  * ```c++
    nights value = 1001: location 00B9FC44
    int value = 1001: location = 01220B98
    double value = 1e+07: location = 01221B80
    location of pointer pd: 00B9FC2C
    size of pt = 4: size of *pt = 4
    size of pd = 4: size of *pd = 8
    ```



#### 4.7.5 ä½¿ç”¨deleteé‡Šæ”¾å†…å­˜

* å½“éœ€è¦å†…å­˜æ—¶ï¼Œå¯ä»¥ä½¿ç”¨newæ¥è¯·æ±‚ï¼›

* å½“ä½¿ç”¨å®Œå†…å­˜åï¼Œéœ€è¦å°†å…¶å½’è¿˜ç»™å†…å­˜æ± æ—¶ï¼Œå¯ä»¥ä½¿ç”¨deleteè¿ç®—ç¬¦ã€‚

  * ``` c++
    int* ps = new int;
    ...
    delete ps;
    ```

  * è¿™å°†é‡Šæ”¾psæŒ‡å‘çš„å†…å­˜ï¼Œä½†ä¸ä¼šåˆ é™¤æŒ‡é’ˆps æœ¬èº«ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥å°†psé‡æ–°æŒ‡å‘å¦ä¸€ä¸ªæ–°åˆ†é…çš„å†…å­˜å—ã€‚

* `æ³¨æ„`ï¼šè¯¦æƒ…è§P104

  * ä¸€å®šè¦é…å¯¹åœ°ä½¿ç”¨newå’Œdeleteï¼›
  * ä¸è¦å°è¯•é‡Šæ”¾å·²ç»é‡Šæ”¾åœ°å†…å­˜å—ï¼›
  * ä¸èƒ½ä½¿ç”¨deleteæ¥é‡Šæ”¾å£°æ˜å˜é‡æ‰€è·å¾—çš„å†…å­˜ã€‚



#### 4.7.6 ä½¿ç”¨newæ¥åˆ›å»ºåŠ¨æ€æ•°ç»„

* åº”ç”¨äºå¤§å‹æ•°æ®ï¼Œä½¿ç”¨newæ—¶ï¼Œå¦‚æœåœ¨è¿è¡Œé˜¶æ®µéœ€è¦æ•°ç»„ï¼Œåˆ™åˆ›å»ºå®ƒã€‚

* 1ã€ä½¿ç”¨new åˆ›å»ºåŠ¨æ€æ•°ç»„ï¼š

  * åªè¦å°†æ•°ç»„çš„å…ƒç´ ç±»å‹å’Œå…ƒç´ æ•°ç›®å‘Šè¯‰newå³å¯ï¼š

    * ``` C++
      int* psome = new int [10];
      ```

    * newè¿ç®—ç¬¦è¿”å›ç¬¬ä¸€ä¸ªå…ƒç´ çš„åœ°å€ã€‚

  * å½“ä½¿ç”¨å®Œnewåˆ†é…çš„å†…å­˜å—æ—¶ï¼Œåº”ä½¿ç”¨deleteé‡Šæ”¾ä»–ä»¬ï¼Œå¯¹`å¯¹åº”`çš„é‡Šæ”¾æ–¹å¼ä¸ºï¼š

    * ``` c++
      delete [] psome;
      ```

  * æ€»ç»“ï¼Œä½¿ç”¨newå’Œdeleteæ—¶ï¼Œåº”éµå®ˆå¦‚ä¸‹è§„åˆ™ï¼š

    * ä¸è¦ä½¿ç”¨deleteæ¥é‡Šæ”¾ä¸æ˜¯newåˆ†é…çš„å†…å­˜ã€‚
    * ä¸è¦ä½¿ç”¨deleteé‡Šæ”¾åŒä¸€ä¸ªå†…å­˜å—ä¸¤æ¬¡ã€‚
    * å¦‚æœä½¿ç”¨new []ä¸ºæ•°ç»„åˆ†é…å†…å­˜ï¼Œåˆ™åº”ä½¿ç”¨delete []æ¥é‡Šæ”¾ã€‚
    * å¦‚æœä½¿ç”¨new []ä¸ºä¸€ä¸ªå®ä½“åˆ†é…å†…å­˜ï¼Œåˆ™åº”ä½¿ç”¨deleteï¼ˆæ²¡æœ‰æ–¹æ‹¬å·ï¼‰æ¥é‡Šæ”¾ã€‚
    * å¯¹ç©ºæŒ‡é’ˆåº”ç”¨deleteæ˜¯å®‰å…¨çš„ã€‚

  * ä¸èƒ½ä½¿ç”¨sizeofè¿ç®—ç¬¦æ¥ç¡®å®šåŠ¨æ€åˆ†é…çš„æ•°ç»„åŒ…å«çš„å­—èŠ‚æ•°ã€‚

  * ä¸ºæ•°ç»„åˆ†é…å†…å­˜çš„é€šç”¨æ ¼å¼ï¼š

    * ``` c++
      type_name * pointer_name = new type_name [num_elements]
      ```

* 2ã€ä½¿ç”¨åŠ¨æ€æ•°ç»„

  * ```c++
    int* psome = new int [10];
    ```

  * åªè¦æŠŠæŒ‡é’ˆå½“ä½œæ•°ç»„åä½¿ç”¨å³å¯ï¼š

    * ç¬¬ä¸€ä¸ªå…ƒç´ psome[0]ï¼Œç¬¬äºŒä¸ªå…ƒç´ psome[1]

  * ä¾‹ç¨‹ï¼š

    * ``` c++
      // arraynew.cpp -- using the new operator for arrays
      #include <iostream>
      int main() {
      	using namespace std;
      	double* p3 = new double[3];
      	p3[0] = 0.2;
      	p3[1] = 0.5;
      	p3[2] = 0.8;
      	cout << "p3[1] is " << p3[1] << ".\n";
      	p3 = p3 + 1;
      	cout << "Now p3[0] is " << p3[0] << " and ";
      	cout << "p3[1] is " << p3[1] << ".\n";
      	p3 = p3 - 1;
      	delete [] p3;
      	
      	return 0;
      }
      ```

  * ç»“æœï¼š

    * ``` c++
      p3[1] is 0.5.
      Now p3[0] is 0.5 and p3[1] is 0.8.
      ```

  * ç›¸é‚»çš„ int åœ°å€é€šå¸¸ç›¸å·®2ä¸ªå­—èŠ‚æˆ–4ä¸ªå­—èŠ‚ï¼Œè€Œå°†p3åŠ 1åï¼Œå®ƒå°†æŒ‡å‘ä¸‹ä¸€ä¸ªå…ƒç´ çš„åœ°å€ï¼Œè¿™è¡¨æ˜æŒ‡é’ˆç®—æœ¯æœ‰ä¸€äº›ç‰¹åˆ«çš„åœ°æ–¹ã€‚è¯¦æƒ…è§P106



### 4.8 æŒ‡é’ˆã€æ•°ç»„å’ŒæŒ‡é’ˆç®—æœ¯

#### 4.8.1 ç¤ºä¾‹

* ç¤ºä¾‹ï¼š

  * ```c++
    // addpntrs.cpp -- pointer addition
    #include <iostream>
    int main() {
    	using namespace std;
    	double wages[3] = {10000.0, 20000.0, 30000.0 };
    	short stacks[3] = {3, 2, 1 };
    
    	double * pw = wages;
    	short * ps = &stacks[0];
    
    	cout << "pw = " << pw << ", *pw = " << *pw << endl;
    	pw = pw + 1;
    	cout << "add 1 to the pw pointer:\n";
    	cout << "pw = " << pw << ", *pw = " << *pw << "\n\n";
    
    	cout << "ps = " << ps << ", *ps = " << *ps << endl;
    	ps = ps + 1;
    	cout << "add 1 to the ps pointer:\n";
    	cout << "ps = " << ps << ", *ps = " << *ps << "\n\n";
    
    	cout << "access two elements with array notation\n";
    	cout << "stacks[0] = " << stacks[0]
    		 << ", stacks[1] = " << stacks[1] << endl;
    	
    	cout << "access two elements with pointer notation\n";
    	cout << "*stacks = " << *stacks
    		<< ", *(stacks + 1) = " << *(stacks + 1) << endl;
    
    	cout << sizeof(wages) << " = size of wages array\n";
    	cout << sizeof(pw) << " = size of pw pointer\n";
    
    	return 0;
    }
    ```

* ç»“æœï¼š

  * ``` c++
    pw = 004FFD08, *pw = 10000
    add 1 to the pw pointer:
    pw = 004FFD10, *pw = 20000
    
    ps = 004FFCF8, *ps = 3
    add 1 to the ps pointer:
    ps = 004FFCFA, *ps = 2
    
    access two elements with array notation
    stacks[0] = 3, stacks[1] = 2
    access two elements with pointer notation
    *stacks = 3, *(stacks + 1) = 2
    24 = size of wages array
    4 = size of pw pointer
    ```

  * C++å°†æ•°ç»„åè§£é‡Šä¸ºæ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ çš„åœ°å€ï¼š

    * wages = &wages[0] = address of first element of array

  * å°†æŒ‡é’ˆå˜é‡åŠ 1åï¼Œå…¶å¢åŠ çš„å€¼ç­‰äºæŒ‡å‘çš„ç±»å‹å ç”¨çš„å­—èŠ‚æ•°ã€‚

  * ä½¿ç”¨æ•°ç»„è¡¨ç¤ºæ³•ï¼Œå¯æ‰§è¡Œå¦‚ä¸‹è½¬æ¢ï¼š

    * arrayname [i] becomes *(arrayname + i)

  * å¦‚æœä½¿ç”¨çš„æ˜¯æŒ‡é’ˆï¼Œè€Œä¸æ˜¯æ•°ç»„åï¼Œåˆ™ï¼š

    * pointername [i] becomes *(pointername + i)

  * åŒºåˆ«ï¼š

    * 1ã€è§£é™¤å¼•ç”¨è¿ç®—ç¬¦ï¼ˆ*ï¼‰æ—¶ï¼Œå®ƒä»¬éƒ½è¡¨ç¤ºæŒ‡é’ˆï¼Œä½†æ˜¯å¯ä»¥ä¿®æ”¹æŒ‡é’ˆçš„å€¼ï¼Œè€Œä¸èƒ½ä¿®æ”¹æ•°ç»„åçš„å€¼ï¼Œå› ä¸ºæ•°ç»„åæ˜¯å¸¸é‡ã€‚
    * 2ã€å¯¹æ•°ç»„åº”ç”¨sizeofå¾—åˆ°çš„æ˜¯æ•°ç»„çš„é•¿åº¦ï¼ˆæ‰€æœ‰æ•°æ®çš„ä½å®½ï¼‰ï¼Œè€Œå¯¹æŒ‡é’ˆåº”ç”¨sizeofå¾—åˆ°çš„æ˜¯æŒ‡é’ˆçš„é•¿åº¦ï¼ˆåœ°å€çš„ä½å®½ï¼‰ã€‚



#### 4.8.2 æŒ‡é’ˆå°ç»“

* 1ã€å£°æ˜æŒ‡é’ˆ

  * é€šç”¨æ ¼å¼ï¼š

    * ``` c++
      typeName * pointerName;
      ```

* 2ã€ç»™æŒ‡é’ˆèµ‹å€¼

  * åº”å°†å†…å­˜åœ°å€èµ‹å€¼ç»™æŒ‡é’ˆï¼š

    * å¯ä»¥å¯¹å˜é‡ååº”ç”¨&è¿ç®—ç¬¦ï¼Œæ¥è·å¾—è¢«å‘½åçš„å†…å­˜åœ°å€ï¼š

      * ``` c++
        double * pn;
        double bubble = 3.2;
        pn = &bubble;
        ```

    * newè¿ç®—ç¬¦è¿”å›æœªå‘½åçš„å†…å­˜åœ°å€ï¼š

      * ```c++
        double * pa;
        char * pc;
        pc = new char;
        pa = new double[30];
        ```

* 3ã€å¯¹æŒ‡é’ˆè§£é™¤å¼•ç”¨

  * å¯¹æŒ‡é’ˆè§£é™¤å¼•ç”¨æ„å‘³ç€è·å¾—æŒ‡é’ˆæŒ‡å‘çš„å€¼ã€‚

  * å¯¹æŒ‡é’ˆåº”ç”¨è§£é™¤å¼•ç”¨æˆ–é—´æ¥å€¼è¿ç®—ç¬¦ï¼ˆ*ï¼‰æ¥è§£é™¤å¼•ç”¨ï¼š

    * ```c++
      cout << *pn;
      *pc = 's';
      ```

* 4ã€åŒºåˆ†æŒ‡é’ˆå’ŒæŒ‡é’ˆæ‰€æŒ‡å‘çš„å€¼

  * å¦‚æœptæ˜¯æŒ‡å‘intçš„æŒ‡é’ˆï¼Œåˆ™*ptå®Œå…¨ç­‰åŒäºä¸€ä¸ªintç±»å‹çš„å˜é‡ã€‚ï¼ˆptæ‰æ˜¯æŒ‡é’ˆï¼‰

* 5ã€æ•°ç»„å

  * å¤šæ•°æƒ…å†µä¸‹ï¼šC++å°†æ•°ç»„åè§†ä¸ºæ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„åœ°å€ã€‚
  * ä¾‹å¤–ï¼šsizeofæ•°ç»„åæ—¶ï¼Œè¿”å›æ•´ä¸ªæ•°ç»„çš„ä½å®½é•¿åº¦ã€‚

* 6ã€æŒ‡é’ˆç®—æœ¯

  * C++å…è®¸å°†æŒ‡é’ˆå’Œæ•´æ•°ç›¸åŠ ï¼ŒåŠ 1çš„ç»“æœç­‰äºåŸæ¥çš„åœ°å€å€¼åŠ ä¸ŠæŒ‡å‘çš„å¯¹è±¡å ç”¨çš„æ€»å­—èŠ‚æ•°ã€‚
  * è¿˜å¯ä»¥å°†ä¸€ä¸ªæŒ‡é’ˆå‡å»å¦ä¸€ä¸ªæŒ‡é’ˆï¼Œè·å¾—ä¸¤ä¸ªæŒ‡é’ˆçš„å·®ï¼ˆæ•´æ•°ï¼Œä»…å½“ä¸¤ä¸ªæŒ‡é’ˆæŒ‡å‘åŒä¸€ä¸ªæ•°ç»„æ—¶æ‰æœ‰æ„ä¹‰ï¼‰

* 7ã€æ•°ç»„çš„åŠ¨æ€è”ç¼–å’Œé™æ€è”ç¼–

  * é™æ€è”ç¼–ï¼š

    * ä½¿ç”¨æ•°ç»„å£°æ˜æ¥åˆ›å»ºæ•°ç»„æ—¶ï¼Œé‡‡ç”¨çš„æ˜¯é™æ€è”ç¼–ï¼Œå³æ•°ç»„çš„é•¿åº¦åœ¨ç¼–è¯‘æ—¶è®¾ç½®ï¼š

      * ```c++
        int tacos[10];
        ```

  * åŠ¨æ€è”ç¼–ï¼š

    * ä½¿ç”¨new[]è¿ç®—ç¬¦åˆ›å»ºæ•°ç»„æ—¶ï¼Œé‡‡ç”¨çš„æ˜¯åŠ¨æ€è”ç¼–ï¼Œå³å°†åœ¨è¿è¡Œæ—¶ä¸ºæ•°ç»„åˆ†é…ç©ºé—´ï¼Œå…¶é•¿åº¦å°†åœ¨è¿è¡Œæ—¶è®¾ç½®ã€‚ä½¿ç”¨å®Œæˆè¿™ç§æ•°ç»„åï¼Œåº”ä½¿ç”¨delete[]é‡Šæ”¾å…¶å ç”¨çš„å†…å­˜ã€‚

      * ``` c++
        int size;
        cin >> size;
        int* pz = new int [size];
        ...
        delete [] pz;
        ```

* 8ã€æ•°ç»„è¡¨ç¤ºæ³•å’ŒæŒ‡é’ˆè¡¨ç¤ºæ³•ï¼ˆ`éš¾æ‡‚`ï¼‰

  * ä½¿ç”¨æ–¹æ‹¬å·æ•°ç»„è¡¨ç¤ºæ³•ç­‰åŒäºå¯¹æŒ‡é’ˆè§£é™¤å¼•ç”¨(ä½ å¯ä»¥ç†è§£ä¸ºè§£é™¤å¼•ç”¨å°±æ˜¯è¡¨ç¤ºæŒ‡é’ˆæŒ‡å‘åœ°å€çš„å€¼)

    * ```c++
      tacos[0] means *tacos means the value at address tacos;
      tacos[3] means *(tacos + 3) means the value at address tacos + 3
      ```

  * å¯¹äºæŒ‡é’ˆå’Œæ•°ç»„åï¼Œæ—¢å¯ä»¥ä½¿ç”¨æŒ‡é’ˆè¡¨ç¤ºæ³•ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æ•°ç»„è¡¨ç¤ºæ³•ï¼š

    * ```c++
      int* pt = new int [10];
      *pt = 5;			//set element number 0 to 5;
      pt[0] = 6;			//reset element number 0 to 6
      pt[9] = 44;  		//set tenth element(element number 9) to 44
      int coats[10];
      *(coats + 4) = 12  	//set coats[4] to 12
      ```



#### 4.8.3 æŒ‡é’ˆå’Œå­—ç¬¦ä¸²

* åœ¨coutå’Œå¤šæ•°C++è¡¨è¾¾å¼ä¸­ï¼Œcharæ•°ç»„åã€charæŒ‡é’ˆä»¥åŠç”¨å¼•å·æ‹¬èµ·çš„å­—ç¬¦ä¸²å¸¸é‡éƒ½è¢«è§£é‡Šä¸ºå­—ç¬¦ä¸²ç¬¬ä¸€ä¸ªå­—ç¬¦çš„åœ°å€ï¼›

* ä¾‹ç¨‹ï¼š

  * ```c++
    // ptrstr.cpp -- using pointers to strings
    #define _CRT_SECURE_NO_WARNINGS
    #include <iostream>
    #include <cstring>
    
    int main() {
    	using namespace std;
    	char animal[20] = "bear";
    	const char* bird = "wren";	//bird holds address of string
    	char* ps;
    
    	cout << animal << " and ";
    	cout << bird << "\n";
    
    	cout << "Enter a kind of animal: ";
    	cin >> animal;
    
    	ps = animal;
    	cout << ps << "!\n";
    	cout << "Before using strcpy():\n";
    	cout << animal << " at " << (int*) animal << endl;
    	cout << ps << " at " << (int *) ps << endl;
    
    	ps = new char[strlen(animal) + 1];
    	strcpy(ps, animal);
    	cout << "After using strcpy():\n";
    	cout << animal << " at " << (int*)animal << endl;
    	cout << ps << " at " << (int*)ps << endl;
    	delete [] ps;
    
    	return 0;
    }
    ```

* ç»“æœï¼š

  * ```c++
    bear and wren
    Enter a kind of animal: fox
    fox!
    Before using strcpy():
    fox at 0079FA98
    fox at 0079FA98
    After using strcpy():
    fox at 0079FA98
    fox at 00E5C7A8
    ```

  * "wren"å®é™…è¡¨ç¤ºçš„æ—¶å­—ç¬¦ä¸²çš„åœ°å€ï¼Œå› æ­¤const char* bird = "wren";å°†â€œwrenâ€çš„åœ°å€èµ‹å€¼ç»™äº†birdæŒ‡é’ˆã€‚

  * å­—ç¬¦ä¸²å­—é¢å€¼æ˜¯å¸¸é‡ï¼Œæ‰€ä»¥å£°æ˜ä¸­ä½¿ç”¨constï¼Œå¯ä»¥ç”¨birdæ¥è®¿é—®å­—ç¬¦ä¸²ï¼Œä½†æ˜¯ä¸èƒ½ä¿®æ”¹å®ƒã€‚

  * å¯¹äºcoutæ¥è¯´ï¼Œä½¿ç”¨æ•°ç»„åanimalå’ŒæŒ‡é’ˆbirdæ˜¯ä¸€æ ·çš„ï¼Œå®ƒä»¬éƒ½æ˜¯å­—ç¬¦ä¸²çš„åœ°å€ï¼Œcoutå°†æ˜¾ç¤ºå‚¨å­˜åœ¨è¿™ä¸¤ä¸ªåœ°å€ä¸Šçš„ä¸¤ä¸ªå­—ç¬¦ä¸²ã€‚

  * ä½¿ç”¨const char* birdæ¥è¾“å…¥å¹¶ä¸åˆé€‚ï¼š

    * æœ‰äº›ç¼–è¯‘å™¨å°†å­—ç¬¦ä¸²å­—é¢å€¼è§†ä¸ºåªè¯»å¸¸é‡ï¼Œå¦‚æœè¯•å›¾ä¿®æ”¹å®ƒä»¬ï¼Œå°†å¯¼è‡´è¿è¡Œé˜¶æ®µé”™è¯¯ã€‚åœ¨C++ä¸­ï¼Œå­—ç¬¦ä¸²å­—é¢å€¼éƒ½å°†è¢«è§†ä¸ºå¸¸é‡ï¼Œä½†å¹¶ä¸æ˜¯æ‰€æœ‰çš„ç¼–è¯‘å™¨éƒ½å¯¹ä»¥å‰çš„è¡Œä¸ºåšäº†è¿™æ ·çš„ä¿®æ”¹ã€‚
    * æœ‰äº›ç¼–è¯‘å™¨åªä½¿ç”¨å­—ç¬¦ä¸²å­—é¢å€¼çš„ä¸€ä¸ªå‰¯æœ¬æ¥è¡¨ç¤ºç¨‹åºä¸­æ‰€æœ‰çš„è¯¥å­—é¢å€¼ã€‚

  * æ€»ç»“ï¼š

    * ä¸è¦ä½¿ç”¨å­—ç¬¦ä¸²å¸¸é‡æˆ–æœªè¢«åˆå§‹åŒ–çš„æŒ‡é’ˆæ¥æ¥æ”¶è¾“å…¥ã€‚

  * è­¦å‘Šï¼š

    * åœ¨å°†å­—ç¬¦ä¸²è¯»å…¥ç¨‹åºæ—¶ï¼Œåº”ä½¿ç”¨å·²åˆ†é…çš„å†…å­˜åœ°å€ã€‚è¯¥åœ°å€å¯ä»¥æ˜¯æ•°ç»„åï¼Œä¹Ÿå¯ä»¥æ˜¯ä½¿ç”¨newåˆå§‹åŒ–è¿‡çš„æŒ‡é’ˆã€‚

  * ä½ ä¸æ‡‚çš„éƒ¨åˆ†ï¼š

    * ``` c++
      	ps = animal;
      	cout << animal << " at " << (int*) animal << endl;
      	cout << ps << " at " << (int *) ps << endl;
      
      //////////////out//////////////
      fox at 0079FA98
      fox at 0079FA98
      ```

    * å¦‚æœç»™coutæä¾›ä¸€ä¸ªåœ°å€ï¼Œä»–å°†æ‰“å°å‚¨å­˜åœ¨åœ°å€ä¸Šçš„å†…å®¹ï¼›

    * å¦‚æœç»™coutæä¾›ä¸€ä¸ªæŒ‡é’ˆï¼Œå®ƒå°†æ‰“å°åœ°å€ï¼›

      * å¦‚æœæŒ‡é’ˆçš„ç±»å‹ä¸ºchar *ï¼Œåˆ™coutå°†æ˜¾ç¤ºæŒ‡å‘çš„å­—ç¬¦ä¸²ï¼›æ‰€ä»¥è¦æ˜¾ç¤ºå­—ç¬¦ä¸²çš„åœ°å€ï¼Œéœ€è¦å¼ºåˆ¶è½¬æ¢æŒ‡é’ˆä¸ºint *

      * å³ï¼š

        * ``` c++
          cout << ps; //display fox
          cout << (int*) ps; //display address of 'fox'
          ```

    * ```c++
      ps = animal;
      ```

      * å°†animalèµ‹å€¼ç»™psï¼Œå¹¶ä¸ä¼šèµ‹å€¼å­—ç¬¦ä¸²ï¼Œè€Œåªèµ‹å€¼åœ°å€ï¼Œè¡¨ç¤ºä¸¤ä¸ªæŒ‡é’ˆåŒæ—¶æŒ‡å‘ç›¸åŒå†…å­˜å•å…ƒçš„å­—ç¬¦ä¸²ã€‚

    * è¦è·å¾—å­—ç¬¦ä¸²å‰¯æœ¬ï¼š

      * 1ã€å£°æ˜å¦ä¸€ä¸ªæ•°å­—

      * 2ã€ä½¿ç”¨newï¼š

        * ``` c++
          ps = new char[strlen(animal) + 1];
          ```

        * foxä¸èƒ½å¡«æ»¡æ•´ä¸ªanimalï¼Œå› æ­¤ä¸ºäº†èŠ‚çœå†…å­˜ç©ºé—´ï¼Œä½¿ç”¨strlen()ç¡®å®šå­—ç¬¦ä¸²çš„é•¿åº¦ï¼›

        * strlen(animal) + 1 è¡¨ç¤ºè·å¾—åŒ…å«foxå’Œç©ºå­—ç¬¦çš„é•¿åº¦ï¼Œç„¶åç”¨newæ¥åˆ†é…ç©ºé—´ã€‚

    * å¤åˆ¶å­—ç¬¦ä¸²ï¼š

      * ```c++
        strcpy(ps, animal);
        ```

      * strcpy()æ¥å—2ä¸ªå‚æ•°ï¼š

        * ç¬¬ä¸€ä¸ªæ˜¯ç›®æ ‡åœ°å€ï¼›
        * ç¬¬äºŒä¸ªæ˜¯è¦å¤åˆ¶çš„å­—ç¬¦ä¸²çš„åœ°å€ã€‚

    * å°†å­—ç¬¦ä¸²èµ‹ç»™æ•°ç»„ï¼š

      * åˆå§‹åŒ–æ•°ç»„æ—¶ï¼Œè¯·ä½¿ç”¨=è¿ç®—ç¬¦ï¼›å¦åˆ™åº”ä½¿ç”¨ strcpy()æˆ–strncpy()ã€‚
      * å…¶ä»–æ—¶å€™åº”ä½¿ç”¨strcpy()æˆ–strncpy()ï¼Œè€Œä¸æ˜¯èµ‹å€¼è¿ç®—ç¬¦æ¥å°†å­—ç¬¦ä¸²èµ‹ç»™æ•°ç»„ã€‚



#### 4.8.4 ä½¿ç”¨newåˆ›å»ºåŠ¨æ€ç»“æ„

* ğŸ“Œåœ¨è¿è¡Œæ—¶åˆ›å»ºæ•°ç»„ä¼˜äºåœ¨ç¼–è¯‘æ—¶åˆ›å»ºæ•°ç»„ï¼Œå¯¹äºç»“æ„ä¹Ÿæ˜¯å¦‚æ­¤ã€‚

* å°†newç”¨äºç»“æ„ç”±2æ­¥ç»„æˆï¼š

  * 1ã€åˆ›å»ºç»“æ„

    * ```c++
      inflatable * ps = new inflatable;
      ```

      * ç»“æ„ä¸­çš„æŒ‡é’ˆåº”ç”¨ï¼š

        * æ–¹æ³•1ï¼š

          * ![image](https://github.com/CoderSuHang/Cpp-Primer-Plus-Notes/assets/104765251/caa27939-0055-4cfd-ac20-15d3a4e7db44)

          * å¦‚æœç»“æ„æ ‡è¯†ç¬¦æ˜¯ç»“æ„åï¼Œåˆ™ä½¿ç”¨å¥ç‚¹è¿ç®—ç¬¦ï¼›
          * å¦‚æœæ ‡è¯†ç¬¦æ˜¯æŒ‡å‘ç»“æ„çš„æŒ‡é’ˆï¼Œåˆ™ä½¿ç”¨ç®­å¤´è¿ç®—ç¬¦ã€‚

        * æ–¹æ³•2ï¼š

          * å¦‚æœpsæ˜¯æŒ‡å‘ç»“æ„çš„æŒ‡é’ˆï¼Œåˆ™*pså°±æ˜¯è¢«æŒ‡å‘çš„å€¼â€”â€”ç»“æ„æœ¬èº«ã€‚
          * ç”±äº* psæ˜¯ä¸€ä¸ªç»“æ„ï¼Œå› æ­¤(* ps) .priceæ˜¯è¯¥ç»“æ„çš„priceæˆå‘˜ã€‚C++çš„è¿ç®—ç¬¦ä¼˜å…ˆè§„åˆ™è¦æ±‚ä½¿ç”¨æ‹¬å·ã€‚

        * ä¾‹ç¨‹ï¼š

          * ```c++
            // newstrct.cpp -- using new with a stucture
            #include <iostream>
            struct inflatable {
            	char name[20];
            	float volume;
            	double price;
            };
            
            int main() {
            	using namespace std;
            	inflatable* ps = new inflatable;
            	cout << "Enter name of inflatable item: ";
            	cin.get(ps->name, 20);
            	cout << "Enter volume in cubic feet: ";
            	cin >> (*ps).volume;
            	cout << "Enter price: $";
            	cin >> ps->price;
            	cout << "Name: " << (*ps).name << endl;
            	cout << "Volume: " << ps->volume << " cubic feet\n";
            	cout << "Price: $" << ps->price << endl;
            	delete ps;
            
            	return 0;
            }
            ```

        * ç»“æœï¼š

          * ``` c++
            Enter name of inflatable item: Fabulous Frodo
            Enter volume in cubic feet: 1.4
            Enter price: $27.99
            Name: Fabulous Frodo
            Volume: 1.4 cubic feet
            Price: $27.99
            ```

  * 2ã€è®¿é—®å…¶æˆå‘˜

* ä¸€ä¸ªä½¿ç”¨newå’Œdeleteçš„ç¤ºä¾‹ï¼š

  * ```c++
    // delete.cpp -- using the delete operator
    #define _CRT_SECURE_NO_WARNINGS
    #include <iostream>
    #include <cstring>
    
    using namespace std;
    char* getname(void);
    
    int main() {
    	char* name;
    
    	name = getname();
    	cout << name << " at " << (int*)name << "\n";
    	delete [] name;
    
    	name = getname();
    	cout << name << " at " << (int*)name << "\n";
    	delete[] name;
    	return 0;
    }
    
    char* getname() {
    	char temp[80];
    	cout << "Enter last name: ";
    	cin >> temp;
    	char* pn = new char[strlen(temp) + 1];
    	strcpy(pn, temp);
    
    	return pn;
    }
    ```

* ç»“æœï¼š

  * ``` c++
    Enter last name: Fredeldumpkin
    Fredeldumpkin at 013609F0
    Enter last name: Pook
    Pook at 013618F8
    ```

  * åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œgetname()åˆ†é…å†…å­˜ï¼Œè€Œmain()é‡Šæ”¾å†…å­˜ã€‚å°† new å’Œ delete æ”¾åœ¨ä¸åŒçš„å‡½æ•°ä¸­é€šå¸¸å¹¶ä¸æ˜¯ä¸ªå¥½åŠæ³•ï¼Œå› ä¸ºè¿™æ ·å¾ˆå®¹æ˜“å¿˜è®°ä½¿ç”¨deleteã€‚ä¸è¿‡è¿™ä¸ªä¾‹å­ç¡®å®æŠŠ new å’Œ delete åˆ†å¼€æ”¾ç½®äº†ï¼Œåªæ˜¯ä¸ºäº†è¯´æ˜è¿™æ ·åšä¹Ÿæ˜¯å¯ä»¥çš„ã€‚



#### 4.8.5 è‡ªåŠ¨å­˜å‚¨ã€é™æ€å­˜å‚¨å’ŒåŠ¨æ€å­˜å‚¨

* 1ã€è‡ªåŠ¨å­˜å‚¨
  * åœ¨å‡½æ•°å†…éƒ¨å®šä¹‰çš„å¸¸è§„å˜é‡ä½¿ç”¨è‡ªåŠ¨å­˜å‚¨ç©ºé—´ï¼Œè¢«ç§°ä¸ºè‡ªåŠ¨å˜é‡(automatic variable)ï¼Œè¿™æ„å‘³ç€å®ƒä»¬åœ¨æ‰€å±çš„å‡½æ•°è¢«è°ƒç”¨æ—¶è‡ªåŠ¨äº§ç”Ÿ,åœ¨è¯¥å‡½æ•°ç»“æŸæ—¶æ¶ˆäº¡ã€‚
  * è‡ªåŠ¨å˜é‡æ˜¯ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œå…¶ä½œç”¨åŸŸä¸ºåŒ…å«å®ƒçš„ä»£ç å—ã€‚
  * è‡ªåŠ¨å˜é‡é€šå¸¸å­˜å‚¨åœ¨æ ˆä¸­ã€‚è¿™æ„å‘³ç€æ‰§è¡Œä»£ç å—æ—¶ï¼Œå…¶ä¸­çš„å˜é‡å°†ä¾æ¬¡åŠ å…¥åˆ°æ ˆä¸­ï¼Œè€Œåœ¨ç¦»å¼€ä»£ç å—æ—¶ï¼Œå°†æŒ‰ç›¸åçš„é¡ºåºé‡Šæ”¾è¿™äº›å˜é‡ï¼Œè¿™è¢«ç§°ä¸ºåè¿›å…ˆå‡ºï¼ˆLIFO)ã€‚å› æ­¤ï¼Œåœ¨ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œæ ˆå°†ä¸æ–­åœ°å¢å¤§å’Œç¼©å°ã€‚
* 2ã€é™æ€å­˜å‚¨
  * é™æ€å­˜å‚¨æ˜¯æ•´ä¸ªç¨‹åºæ‰§è¡ŒæœŸé—´éƒ½å­˜åœ¨çš„å­˜å‚¨æ–¹å¼ã€‚ä½¿å˜é‡æˆä¸ºé™æ€çš„æ–¹å¼æœ‰ä¸¤ç§ï¼›
    * ä¸€ç§æ˜¯åœ¨å‡½æ•°å¤–é¢å®šä¹‰å®ƒï¼›
    * å¦ä¸€ç§æ˜¯åœ¨å£°æ˜å˜é‡æ—¶ä½¿ç”¨å…³é”®å­—staticã€‚
* 3ã€åŠ¨æ€å­˜å‚¨
  * newå’Œdeleteè¿ç®—ç¬¦æä¾›äº†ä¸€ç§æ¯”è‡ªåŠ¨å˜é‡å’Œé™æ€å˜é‡æ›´çµæ´»çš„æ–¹æ³•ï¼š
    * å®ƒä»¬ç®¡ç†äº†ä¸€ä¸ªå†…å­˜æ± ï¼Œè¿™åœ¨C++ä¸­è¢«ç§°ä¸ºè‡ªç”±å­˜å‚¨ç©ºé—´(free store)æˆ–å †(heap)ã€‚
    * è¯¥å†…å­˜æ± åŒç”¨äºé™æ€å˜é‡å’Œè‡ªåŠ¨å˜é‡çš„å†…å­˜æ˜¯åˆ†å¼€çš„ã€‚newå’Œdeleteè®©æ‚¨èƒ½å¤Ÿåœ¨ä¸€ä¸ªå‡½æ•°ä¸­åˆ†é…å†…å­˜ï¼Œè€Œåœ¨å¦ä¸€ä¸ªå‡½æ•°ä¸­é‡Šæ”¾å®ƒã€‚å› æ­¤ï¼Œæ•°æ®çš„ç”Ÿå‘½å‘¨æœŸä¸å®Œå…¨å—ç¨‹åºæˆ–å‡½æ•°çš„ç”Ÿå­˜æ—¶é—´æ§åˆ¶ã€‚
  * è¦é¿å…å†…å­˜æ³„æ¼éœ€è¦åŒæ—¶ä½¿ç”¨newå’Œdeleteè¿ç®—ç¬¦ï¼Œåœ¨è‡ªç”±å­˜å‚¨ç©ºé—´ä¸ŠåŠ¨æ€åˆ†é…å†…å­˜ï¼Œéšåä¾¿é‡Šæ”¾å®ƒã€‚



### 4.9 ç±»å‹ç»„åˆ

* `å¾ˆéš¾æ‡‚`ï¼Œ<u>**æƒ³åŠæ³•æ‰¾ç‚¹è§†é¢‘çœ‹ä¸€ä¸‹**</u>ã€‚P118-119

* ``` c++
  struct antarctica_years_end{
    int year;
  };
  
  antarctica_years_end s01, s02, s03;
  s01.year = 1998;
  const antarctica_years_end* arp[3] = {&s01, &s02, &s03}//arpæ˜¯ä¸€ä¸ªæŒ‡é’ˆæ•°ç»„ï¼Œarp[1]å°±æ˜¯ä¸€ä¸ªæŒ‡é’ˆ
  std::cout << arp[1]->year << std::cout;
  const antarctica_years_end** ppa = arp;//arpæ˜¯ä¸€ä¸ªæŒ‡é’ˆæ•°ç»„ï¼Œä½œä¸ºæ•°ç»„åï¼Œæ˜¯ç¬¬ä¸€ä¸ªå…ƒç´ çš„åœ°å€ã€‚è€Œç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯æŒ‡é’ˆï¼Œæ‰€ä»¥ppa=arpæ˜¯ä¸€ä¸ªæŒ‡é’ˆ
  auto ppb = arp;
  std::cout << (*ppa)->year << std::endl;//ppaæ˜¯ä¸€ä¸ªæŒ‡å‘ç»“æ„æŒ‡é’ˆçš„æŒ‡é’ˆï¼Œæ‰€ä»¥*ppaæ˜¯ä¸€ä¸ªç»“æ„æŒ‡é’ˆï¼Œå³(*ppa)ç­‰ä»·äºarp[0]ä¸­çš„å€¼&s01
  std::cout << (*(ppb+1))->year << std::endl;
  ```

* ![image](https://github.com/CoderSuHang/Cpp-Primer-Plus-Notes/assets/104765251/e6122953-e96f-4a1d-b6ed-f03ccb77241e)


* ä¾‹ç¨‹ï¼š

  * ```c++
    // mixtypes.cpp -- some type combinations
    #include <iostream>
    
    struct antarctica_years_end {
    	int year;
    };
    
    int main() {
    	antarctica_years_end s01, s02, s03;
    	s01.year = 1998;
    	antarctica_years_end* pa = &s02;
    	pa->year = 1999;
    	//trioæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œtrio[0]æ˜¯ä¸€ä¸ªç»“æ„ï¼Œè€Œtrio[0].yearæ˜¯è¯¥ç»“æ„çš„ä¸€ä¸ªæˆå‘˜
    	antarctica_years_end trio[3];
    	trio[0].year = 2003;
    	//æ•°ç»„åæ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨é—´æ¥é™ˆå† ç¬¦å·ï¼š
    	std::cout << trio->year << std::endl;
    	//å®šä¹‰ä¸€ä¸ªæŒ‡é’ˆæ•°ç»„ï¼Œarp[1]ç­‰ä»·äº&s02ï¼Œå³æŒ‡å‘s02çš„æŒ‡é’ˆ
    	const antarctica_years_end* arp[3] = {&s01, &s02, &s03};
    	std::cout << arp[1]->year << std::endl;
    	//arpæ˜¯æŒ‡é’ˆæ•°ç»„çš„æ•°ç»„åï¼Œä»£è¡¨ç¬¬ä¸€ä¸ªå…ƒç´ çš„åœ°å€
    	const antarctica_years_end** ppa = arp;
    	auto ppd = arp;
    	//ppa=arpè¯´æ˜ppaæŒ‡å‘äº†ç¬¬ä¸€å…ƒç´ ï¼Œç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯s01çš„ç»“æ„æŒ‡é’ˆ&s01
    	//å› æ­¤ppaæ˜¯æŒ‡å‘ç»“æ„æŒ‡é’ˆçš„æŒ‡é’ˆï¼Œé‚£ä¹ˆ*ppaç­‰ä»·äºç¬¬ä¸€ä¸ªå…ƒç´ &s01
    	std::cout << (*ppa)->year << std::endl;
    	std::cout << (*(ppd+1))->year << std::endl;
    
    	return 0;
    }
    ```

* ç»“æœï¼š

  * ```c++
    2003//trio[0].year
    1999//s02
    1998//s01
    1999//s02
    ```



### 4.10 æ•°ç»„çš„æ›¿ä»£å“

#### 4.10.1 æ¨¡æ¿ç±»vector

* æ¨¡æ¿ç±»vectorç±»ä¼¼äºstringç±»ï¼Œä¹Ÿæ˜¯ä¸€ç§åŠ¨æ€æ•°ç»„ï¼›
  * å¯ä»¥åœ¨è¿è¡Œé˜¶æ®µè®¾ç½®vectorå¯¹è±¡çš„é•¿åº¦ï¼Œå¯åœ¨æœ«å°¾é™„åŠ æ–°æ•°æ®ï¼Œè¿˜å¯åœ¨ä¸­é—´æ’å…¥æ–°æ•°æ®ã€‚
  * å®ƒæ˜¯ä½¿ç”¨newåˆ›å»ºåŠ¨æ€æ•°ç»„çš„æ›¿ä»£å“ã€‚
* å¦‚ä½•ä½¿ç”¨vectorå¯¹è±¡ï¼š
  * 1ã€å¿…é¡»åŒ…å«å¤´æ–‡ä»¶ï¼š
    * #include <vector>
  * 2ã€vectoråŒ…å«åœ¨åç§°ç©ºé—´stdä¸­ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨usingç¼–è¯‘æŒ‡ä»¤ã€usingå£°æ˜æˆ–std::vectorï¼š
    * using namespace std;
  * 3ã€æ¨¡æ¿ä½¿ç”¨ä¸åŒçš„è¯­æ³•æ¥æŒ‡å‡ºå®ƒå­˜å‚¨çš„æ•°æ®ç±»å‹ï¼š
    * vector<int> vi;
  * 4ã€vectorç±»ä½¿ç”¨ä¸åŒçš„è¯­æ³•æ¥æŒ‡å®šå…ƒç´ æ•°ï¼š
    * int n;
    * cin >> n;
    * vector<double> vd(n);
* ğŸ“Œå£°æ˜åˆ›å»ºä¸€ä¸ªåä¸ºvtçš„vectorå¯¹è±¡é€šç”¨æ ¼å¼ï¼š
  * vector<*typeName*> vt(*n_elem*);
  * n_elemå¯ä»¥æ˜¯æ•´å‹å¸¸é‡ï¼Œä¹Ÿå¯ä»¥æ˜¯æ•´å‹å˜é‡ã€‚



#### 4.10.2 æ¨¡æ¿ç±»arrayï¼ˆC++11ï¼‰

* vectorç±»çš„åŠŸèƒ½æ¯”æ•°ç»„å¼ºå¤§ï¼Œä½†ä»˜å‡ºçš„ä»£ä»·æ˜¯æ•ˆç‡ç¨ä½ã€‚å¦‚æœéœ€è¦é•¿åº¦å›ºå®šçš„æ•°ç»„å¯ä»¥ä½¿ç”¨æ•°ç»„ï¼Œæ›´å¥½çš„åŠæ³•æ˜¯ä½¿ç”¨æ¨¡æ¿ç±»arrayï¼Œå…¶é•¿åº¦ä¹Ÿæ˜¯å›ºå®šçš„ï¼Œä½¿ç”¨æ ˆï¼Œæ•ˆç‡ä¸æ•°ç»„ç›¸åŒï¼Œä¼šæ›´åŠ æ–¹ä¾¿å®‰å…¨ã€‚
* åˆ›å»ºæ–¹æ³•ï¼š
  * 1ã€å¿…é¡»åŒ…å«å¤´æ–‡ä»¶ï¼š
    * #include <array>
  * 2ã€vectoråŒ…å«åœ¨åç§°ç©ºé—´stdä¸­ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨usingç¼–è¯‘æŒ‡ä»¤ã€usingå£°æ˜æˆ–std::vectorï¼š
    * using namespace std;
  * 3ã€æ¨¡æ¿ä½¿ç”¨ä¸åŒçš„è¯­æ³•æ¥æŒ‡å‡ºå®ƒå­˜å‚¨çš„æ•°æ®ç±»å‹ï¼š
    * array<int, 5> ai;
    * array<double, 4> = {1.2, 2.1, 3.43, 4.3}
* ğŸ“Œå£°æ˜åˆ›å»ºä¸€ä¸ªåä¸ºarrçš„arrayå¯¹è±¡é€šç”¨æ ¼å¼ï¼š
  * array<*typeNameï¼Œ n_elem*> arr;
  * n_elemå¯ä»¥æ˜¯æ•´å‹å¸¸é‡ï¼Œ`ä¸èƒ½`æ˜¯æ•´å‹å˜é‡ã€‚



#### 4.10.3 æ¯”è¾ƒæ•°ç»„ã€vectorå¯¹è±¡å’Œarrayå¯¹è±¡

* ç¤ºä¾‹ï¼š

  * ```c++
    #include <array>
    
    int main() {
    	using namespace std;
    	double a1[4] = { 1.2, 2.4, 3.6, 4.8};
    	vector<double> a2(4);
    	a2[0] = 1.0/3.0;
    	a2[1] = 1.0/5.0;
    	a2[2] = 1.0/7.0;
    	a2[3] = 1.0/9.0;
    
    	array<double, 4> a3 = { 3.14, 2.72, 1.62, 1.41 };
    	array<double, 4> a4;
    	a4 = a3;
    
    	cout << "a1[2]: " << a1[2] << " at " << &a1[2] << endl;
    	cout << "a2[2]: " << a2[2] << " at " << &a2[2] << endl;
    	cout << "a3[2]: " << a3[2] << " at " << &a3[2] << endl;
    	cout << "a4[2]: " << a4[2] << " at " << &a4[2] << endl;
    
    	a1[-2] = 20.2;
    	cout << "a1[-2]: " << a1[-2] << " at " << &a1[-2] << endl;
    	cout << "a3[2]: " << a3[2] << " at " << &a3[2] << endl;
    	cout << "a4[2]: " << a4[2] << " at " << &a4[2] << endl;
    
    	return 0;
    }
    ```

* ç»“æœï¼š

  * ```c++
    a1[2]: 3.6 at 00AFF738
    a2[2]: 0.142857 at 0101C878
    a3[2]: 1.62 at 00AFF6F8
    a4[2]: 1.62 at 00AFF6D0
    a1[-2]: 20.2 at 00AFF718
    a3[2]: 1.62 at 00AFF6F8
    a4[2]: 1.62 at 00AFF6D0
    ```

  * ``` c++
    a1[-2] = 20.2;
    //ç­‰ä»·äºï¼š
    *(a1-2) = 20.2;
    ```

    * æ‰¾åˆ°a1æŒ‡å‘çš„åœ°æ–¹ï¼Œå‘å‰ç§»ä¸¤ä¸ªdoubleå…ƒç´ ï¼Œå¹¶å°†20.2å­˜å‚¨åˆ°ç›®çš„åœ°ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå°†ä¿¡æ¯å­˜å‚¨åˆ°æ•°ç»„çš„å¤–é¢ã€‚ä¸Cè¯­è¨€ä¸€æ ·ï¼ŒC++ä¹Ÿä¸æ£€æŸ¥è¿™ç§è¶…ç•Œé”™è¯¯ã€‚

    * ç¦æ­¢è¿™ç§è¡Œä¸ºå–å†³äºä½ ï¼

    * å…¶ä»–é€‰æ‹©ï¼šä½¿ç”¨æˆå‘˜å‡½æ•°at():

      * a2.at(1) = 2.3;//assign 2.3 to a2[1]

      

