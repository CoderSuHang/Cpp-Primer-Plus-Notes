## ç¬¬åä¸€ç«  ä½¿ç”¨ç±»

å­¦ä¹ æœ¬ç« çŸ¥è¯†çš„æœ€å¥½æ–¹æ³•ï¼šåœ¨æˆ‘ä»¬è‡ªå·±å¼€å‘çš„C++ç¨‹åºä¸­ä½¿ç”¨å…¶ä¸­çš„æ–°ç‰¹æ€§ã€‚â€œè½»æ¾åœ°ä½¿ç”¨è¿™ç§è¯­è¨€ï¼Œä¸è¦è§‰å¾—å¿…é¡»ä½¿ç”¨æ‰€æœ‰çš„ç‰¹æ€§ï¼Œä¸è¦åœ¨ç¬¬ä¸€æ¬¡å­¦ä¹ æ—¶å°±è¯•å›¾ä½¿ç”¨æ‰€æœ‰çš„ç‰¹æ€§ã€‚â€

### 11.1 è¿ç®—ç¬¦é‡è½½

ï¼ˆ1ï¼‰è¿ç®—ç¬¦é‡è½½æ˜¯ä¸€ç§å½¢å¼çš„C++å¤šæ€ã€‚

ï¼ˆ2ï¼‰C++å…è®¸å°†è¿ç®—ç¬¦é‡è½½æ‰©å±•åˆ°ç”¨æˆ·å®šä¹‰çš„ç±»å‹ï¼š

* ä¸¤ä¸ªæ•°ç»„ç›¸åŠ ï¼Œé‡è½½+è¿ç®—ç¬¦ï¼š

  * ```c++
    evening = sam + janet;
    ```

ï¼ˆ3ï¼‰é‡è½½è¿ç®—ç¬¦æ–¹æ³•ï¼š

* éœ€ä½¿ç”¨è¢«ç§°ä¸ºè¿ç®—ç¬¦å‡½æ•°çš„ç‰¹æ®Šå‡½æ•°å½¢å¼ï¼š

  * ```c++
    operatorop(argument-list)
    ```

  * ä¾‹å¦‚ï¼š

    * operator +()é‡è½½+è¿ç®—ç¬¦
    * operator *()é‡è½½ *è¿ç®—ç¬¦

  * ä¸èƒ½è™šæ„ä¸€ä¸ªæ–°çš„ç¬¦å·ï¼š@ç­‰



### 11.2 è®¡ç®—æ—¶é—´ï¼šä¸€ä¸ªè¿ç®—ç¬¦é‡è½½ç¤ºä¾‹

â€‹	é‡‡ç”¨ä¸€ä¸ªä½¿ç”¨æ–¹æ³•æ¥å¤„ç†åŠ æ³•çš„Timeç±»ï¼š

ï¼ˆ1ï¼‰ç±»å£°æ˜ï¼š

* ç¤ºä¾‹ï¼š

  * ```c++
    #pragma once
    // ch11_01_mytime0.h -- Time class before operator overloading
    #ifndef CH11_O1_MYTIME0_H_
    #define CH11_O1_MYTIME0_H_
    
    class Time
    {
    private:
    	int hours;
    	int minutes;
    public:
    	Time();
    	Time(int h, int m = 0);
    	void AddMin(int m);
    	void AddHr(int h);
    	void Reset(int h = 0, int m = 0);
    	Time Sum(const Time& t) const;
    	void Show() const;
    };
    #endif
    ```

ï¼ˆ2ï¼‰æ–¹æ³•å®šä¹‰æ–‡ä»¶ï¼š

* ç¤ºä¾‹ï¼š

  * ```c++
    // ch11_02_mytime0.cpp -- implementing Time methods
    #include <iostream>
    #include "ch11_01_mytime0.h"
    
    Time::Time()
    {
    	hours = minutes = 0;
    }
    
    Time::Time(int h, int m)
    {
    	hours = h;
    	minutes = m;
    }
    
    void Time::AddMin(int m)
    {
    	minutes += m;
    	hours += minutes / 60;
    	minutes %= 60;
    }
    
    void Time::AddHr(int h)
    {
    	hours += h;
    }
    
    void Time::Reset(int h, int m)
    {
    	hours = h;
    	minutes = m;
    }
    
    Time Time::Sum(const Time& t) const
    {
    	Time sum;
    	sum.minutes = minutes + t.minutes;
    	sum.hours = hours + t.hours + sum.minutes / 60;
    	sum.minutes %= 60;
    	return sum;
    }
    
    void Time::Show() const
    {
    	std::cout << hours << " hours, " << minutes << " minutes";
    }
    ```

ï¼ˆ3ï¼‰ä½¿ç”¨ç±»æ–‡ä»¶ï¼š

* ç¤ºä¾‹ï¼š

  * ```c++
    // ch11_03_usetime0.cpp -- using the first draft of the Time class
    // compile usetime0.cpp and mytime0.cpp together
    
    #include <iostream>
    #include "ch11_01_mytime0.h"
    
    int main()
    {
    	using std::cout;
    	using std::endl;
    	Time planning;
    	Time coding(2, 40);
    	Time fixing(5, 55);
    	Time total;
    
    	cout << "planning time = ";
    	planning.Show();
    	cout << endl;
    
    	cout << "coding time = ";
    	coding.Show();
    	cout << endl;
    
    	cout << "fixing time = ";
    	fixing.Show();
    	cout << endl;
    
    	total = coding.Sum(fixing);
    	cout << "coding.Sum(fixing) = ";
    	total.Show();
    	cout << endl;
    
    	return 0;
    }
    ```

* ç»“æœï¼š

  * ```c++
    planning time = 0 hours, 0 minutes
    coding time = 2 hours, 40 minutes
    fixing time = 5 hours, 55 minutes
    coding.Sum(fixing) = 8 hours, 35 minutes
    ```

#### 11.2.1 æ·»åŠ åŠ æ³•è¿ç®—ç¬¦

â€‹	å°†Timeç±»è½¬æ¢ä¸ºé‡è½½çš„åŠ æ³•è¿ç®—ç¬¦å¾ˆå®¹æ˜“ï¼Œåªè¦å°†Sun()çš„åç§°æ”¹ä¸ºoperator+()å³å¯ã€‚

ï¼ˆ1ï¼‰ç±»å£°æ˜ï¼š

* ç¤ºä¾‹ï¼š

  * ```c++
    #pragma once
    
    // ch11_04_mytime1.h -- Time class before operator overloading
    #ifndef CH11_O4_MYTIME1_H_
    #define CH11_O4_MYTIME1_H_
    
    class Time
    {
    private:
    	int hours;
    	int minutes;
    public:
    	Time();
    	Time(int h, int m = 0);
    	void AddMin(int m);
    	void AddHr(int h);
    	void Reset(int h = 0, int m = 0);
    	Time operator+(const Time& t) const;
    	void Show() const;
    };
    #endif
    ```

ï¼ˆ2ï¼‰ç±»æ–¹æ³•æ–‡ä»¶ï¼š

* ç¤ºä¾‹ï¼š

  * ```c++
    // ch11_05_mytime1.cpp -- implementing Time methods
    #include <iostream>
    #include "ch11_04_mytime1.h"
    
    Time::Time()
    {
    	hours = minutes = 0;
    }
    
    Time::Time(int h, int m)
    {
    	hours = h;
    	minutes = m;
    }
    
    void Time::AddMin(int m)
    {
    	minutes += m;
    	hours += minutes / 60;
    	minutes %= 60;
    }
    
    void Time::AddHr(int h)
    {
    	hours += h;
    }
    
    void Time::Reset(int h, int m)
    {
    	hours = h;
    	minutes = m;
    }
    
    Time Time::operator+(const Time& t) const
    {
    	Time sum;
    	sum.minutes = minutes + t.minutes;
    	sum.hours = hours + t.hours + sum.minutes / 60;
    	sum.minutes %= 60;
    	return sum;
    }
    
    void Time::Show() const
    {
    	std::cout << hours << " hours, " << minutes << " minutes";
    }
    ```

  * å’ŒSum()ä¸€æ ·ï¼Œoperator+()ä¹Ÿæ˜¯ç”±Timeå¯¹è±¡è°ƒç”¨çš„ï¼Œå®ƒå°†ç¬¬äºŒä¸ªTimeå¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªTimeå¯¹è±¡ã€‚

  * å› æ­¤å¯ä»¥åƒè°ƒç”¨Sum()é‚£æ ·æ¥è°ƒç”¨operator()æ–¹æ³•ï¼š

    * ```c++
      total = morefixing.operator+(total);
      ```

  * ä¹Ÿå¯ä»¥ç”¨è¿ç®—ç¬¦ï¼š

    * ```c++
      total = coding + fixing;
      ```

    * è¿ç®—ç¬¦å·¦ä¾§å¯¹è±¡â€œcodingâ€æ˜¯è°ƒç”¨å¯¹è±¡ï¼Œå³ä¾§å¯¹è±¡â€œfixingâ€æ˜¯ä½œä¸ºå‚æ•°è¢«ä¼ é€’çš„å¯¹è±¡ã€‚

ï¼ˆ3ï¼‰ä½¿ç”¨ç±»æ–‡ä»¶ï¼š

* ç¤ºä¾‹ï¼š

  * ```c++
    // ch11_06_usetime1.cpp -- using the first draft of the Time class
    // compile usetime1.cpp and mytime1.cpp together
    
    #include <iostream>
    #include "ch11_04_mytime1.h"
    
    int main()
    {
    	using std::cout;
    	using std::endl;
    	Time planning;
    	Time coding(2, 40);
    	Time fixing(5, 55);
    	Time total;
    
    	cout << "planning time = ";
    	planning.Show();
    	cout << endl;
    
    	cout << "coding time = ";
    	coding.Show();
    	cout << endl;
    
    	cout << "fixing time = ";
    	fixing.Show();
    	cout << endl;
    
    	total = coding + fixing;
    	cout << "coding + fixing = ";
    	total.Show();
    	cout << endl;
    
    	Time morefixing(3, 28);
    	cout << "morefixing time = ";
    	morefixing.Show();
    	cout << endl;
    	total = morefixing.operator+(total);
    	cout << "morefixing.operator+(total) = ";
    	total.Show();
    	cout << endl;
    
    	return 0;
    }
    ```

* ç»“æœï¼š

  * ```c++
    planning time = 0 hours, 0 minutes
    coding time = 2 hours, 40 minutes
    fixing time = 5 hours, 55 minutes
    coding + fixing = 8 hours, 35 minutes
    morefixing time = 3 hours, 28 minutes
    morefixing.operator+(total) = 12 hours, 3 minutes
    ```

ğŸ“Œè¿ç®—ç¬¦å¯ä»¥å’Œå¤šä¸ªå¯¹è±¡é‡è½½åœ¨ä¸€æ¡è¯­å¥ä¸­ã€‚

#### 11.2.2 é‡è½½é™åˆ¶

* 1ã€é‡è½½åçš„è¿ç®—ç¬¦å¿…é¡»è‡³å°‘æœ‰ä¸€ä¸ªæ“ä½œæ•°æ˜¯ç”¨æˆ·å®šä¹‰çš„ç±»å‹ï¼Œè¿™å°†é˜²æ­¢ç”¨æˆ·ä¸ºæ ‡å‡†ç±»å‹é‡è½½è¿ç®—ç¬¦ã€‚
  * ä¾‹å¦‚ä¸èƒ½å°†å‡æ³•è¿ç®—ç¬¦(-)é‡è½½ä¸ºè®¡ç®—ä¸¤ä¸ªdoubleå€¼çš„å’Œï¼Œè€Œä¸æ˜¯å®ƒä»¬çš„å·®ã€‚
* 2ã€ä½¿ç”¨è¿ç®—ç¬¦æ—¶ä¸èƒ½è¿åè¿ç®—ç¬¦åŸæ¥çš„å¥æ³•è§„åˆ™
  * ä¾‹å¦‚ï¼šä¸èƒ½å°†æ±‚æ¨¡è¿ç®—ç¬¦(%)é‡è½½æˆä½¿ç”¨ä¸€ä¸ªæ“ä½œæ•°ï¼ŒåŒæ ·ä¸èƒ½ä¿®æ”¹è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§ã€‚
* 3ã€ä¸èƒ½åˆ›å»ºæ–°è¿ç®—ç¬¦ã€‚
  * ä¾‹å¦‚ï¼šä¸èƒ½å®šä¹‰operator**()å‡½æ•°æ¥è¡¨ç¤ºæ±‚å¹‚ã€‚
* 4ã€ä¸èƒ½é‡è½½ä¸‹é¢çš„è¿ç®—ç¬¦ï¼š
  * ![image](https://github.com/CoderSuHang/Cpp-Primer-Plus-Notes/assets/104765251/dcc8694d-4164-4ffe-a5c0-eeca00bcb4fe)
* 5ã€è¡¨11.1ä¸­çš„å¤§å¤šæ•°è¿ç®—ç¬¦éƒ½å¯ä»¥é€šè¿‡æˆå‘˜æˆ–éæˆå‘˜å‡½æ•°è¿›è¡Œé‡è½½ã€‚
  * ![image](https://github.com/CoderSuHang/Cpp-Primer-Plus-Notes/assets/104765251/da61fa37-fcb5-4736-b76f-39158fe8ed94)
  * ![image](https://github.com/CoderSuHang/Cpp-Primer-Plus-Notes/assets/104765251/2a924af3-4385-4fe9-b5bc-e489bb37d490)
  * ä½†ä¸‹é¢çš„è¿ç®—ç¬¦åªèƒ½é€šè¿‡æˆå‘˜å‡½æ•°è¿›è¡Œé‡è½½ï¼š
    * ![image](https://github.com/CoderSuHang/Cpp-Primer-Plus-Notes/assets/104765251/b15ddd29-8f63-471a-b2bd-7f5e9e2cf7a6)
#### 11.2.3 å…¶ä»–é‡è½½è¿ç®—ç¬¦

â€‹	ä¸¤ä¸ªå¯¹è±¡çš„çš„ç›¸å‡ï¼Œæˆ–è€…å°†ä¸€ä¸ªå¯¹è±¡ä¹˜ä»¥ä¸€ä¸ªå› å­

* ```c++
  Time operator-(const Time & t) const;
  Time operator*(double n) const;
  ```

ï¼ˆ1ï¼‰ç±»å£°æ˜å¤´æ–‡ä»¶ï¼š

* ç¤ºä¾‹ï¼š

  * ```c++
    #pragma once
    // ch11_07_mytime2.h -- Time class after operator overloading
    #ifndef CH11_O7_MYTIME2_H_
    #define CH11_O7_MYTIME2_H_
    
    class Time
    {
    private:
    	int hours;
    	int minutes;
    public:
    	Time();
    	Time(int h, int m = 0);
    	void AddMin(int m);
    	void AddHr(int h);
    	void Reset(int h = 0, int m = 0);
    	Time operator+(const Time& t) const;
    	Time operator-(const Time& t) const;
    	Time operator*(double n) const;
    	void Show() const;
    };
    #endif
    ```

ï¼ˆ2ï¼‰æ–¹æ³•æ–‡ä»¶ï¼š

* ç¤ºä¾‹ï¼š

  * ```c++
    // ch10_08_mytime2.cpp -- implementing Time methods
    #include <iostream>
    #include "ch11_07_mytime2.h"
    
    Time::Time()
    {
    	hours = minutes = 0;
    }
    
    Time::Time(int h, int m)
    {
    	hours = h;
    	minutes = m;
    }
    
    void Time::AddMin(int m)
    {
    	minutes += m;
    	hours += minutes / 60;
    	minutes %= 60;
    }
    
    void Time::AddHr(int h)
    {
    	hours += h;
    }
    
    void Time::Reset(int h, int m)
    {
    	hours = h;
    	minutes = m;
    }
    
    Time Time::operator+(const Time& t) const
    {
    	Time sum;
    	sum.minutes = minutes + t.minutes;
    	sum.hours = hours + t.hours + sum.minutes / 60;
    	sum.minutes %= 60;
    	return sum;
    }
    
    Time Time::operator-(const Time& t) const
    {
    	Time diff;
    	int tot1, tot2;
    	tot1 = t.minutes + 60 * t.hours;
    	tot2 = minutes + 60 * hours;
    	diff.minutes = (tot2 - tot1) % 60;
    	diff.hours = (tot2 - tot1) / 60;
    	return diff;
    }
    
    Time Time::operator*(double mult) const
    {
    	Time result;
    	long totalminutes = hours * mult * 60 + minutes + mult;
    	result.hours = totalminutes / 60;
    	result.minutes = totalminutes % 60;
    	return result;
    }
    
    void Time::Show() const
    {
    	std::cout << hours << " hours, " << minutes << " minutes";
    }
    ```

ï¼ˆ3ï¼‰ä½¿ç”¨ç±»æ–‡ä»¶ï¼š

* ç¤ºä¾‹ï¼š

  * ```c++
    // ch11_09_usetime2.cpp -- using the first draft of the Time class
    // compile usetime2.cpp and mytime2.cpp together
    
    #include <iostream>
    #include "ch11_07_mytime2.h"
    
    int main()
    {
    	using std::cout;
    	using std::endl;
    	Time weeding(4, 35);
    	Time waxing(2, 47);
    	Time total;
    	Time diff;
    	Time adjusted;
    
    	cout << "weeding time = ";
    	weeding.Show();
    	cout << endl;
    
    	cout << "waxing time = ";
    	waxing.Show();
    	cout << endl;
    
    	cout << "total work time = ";
    	total = weeding + waxing;
    	total.Show();
    	cout << endl;
    
    	diff = weeding - waxing;
    	cout << "weeding time - waxing time = ";
    	diff.Show();
    	cout << endl;
    
    	adjusted = total * 1.5;
    	cout << "adjusted work time = ";
    	adjusted.Show();
    	cout << endl;
    
    	return 0;
    }
    ```

* ç»“æœï¼š

  * ```c++
    weeding time = 4 hours, 35 minutes
    waxing time = 2 hours, 47 minutes
    total work time = 7 hours, 22 minutes
    weeding time - waxing time = 1 hours, 48 minutes
    adjusted work time = 11 hours, 3 minutes
    ```



### 11.3 å‹å…ƒ

ï¼ˆ1ï¼‰3ç§å‹å…ƒå½¢å¼ï¼šå‹å…ƒå‡½æ•°ã€å‹å…ƒç±»ã€å‹å…ƒæˆå‘˜å‡½æ•°ã€‚æœ¬ç« é‡ç‚¹ä»‹ç»å‹å…ƒå‡½æ•°ã€‚

ï¼ˆ2ï¼‰éœ€è¦å‹å…ƒçš„åŸå› ï¼š

* åœ¨ä¸ºé‡è½½äºŒå…ƒè¿ç®—ç¬¦æ—¶ï¼ˆå¸¦ä¸¤ä¸ªå‚æ•°çš„è¿ç®—ç¬¦ï¼‰å¸¸å¸¸éœ€è¦å‹å…ƒã€‚ä¾‹å¦‚*ä¹˜æ³•è¿ç®—ç¬¦ï¼Œè°ƒç”¨å¯¹è±¡å’Œæ”¾å¤§å€æ•°ç›¸ä¹˜ï¼Œè®²ç©¶è¿™ä¸¤ä¸ªæ“ä½œæ•°çš„ä½ç½®ï¼Œåªæœ‰è°ƒç”¨å¯¹è±¡åœ¨å³ï¼Œå€æ•°åœ¨å·¦æ—¶æ‰å¯ä½¿ç”¨ã€‚è¯¦æƒ…è§P391ã€‚

* è§£å†³åŠæ³•ï¼šéæˆå‘˜å‡½æ•°â€”â€”ä¸ç”±å¯¹è±¡è°ƒç”¨ï¼Œå®ƒä½¿ç”¨çš„æ‰€æœ‰å€¼ï¼ˆåŒ…æ‹¬å¯¹è±¡ï¼‰éƒ½æ˜¯æ˜¾å¼å‚æ•°ã€‚

  * è¿™æ ·å°±èƒ½å¤Ÿå°†ä¸‹é¢ä¸¤ä¸ªè¯­å¥åŒ¹é…ï¼š

    * ```c++
      A = 2.75 * B;
      A = operator*(2.5, B);
      ```

    * è¯¥å‡½æ•°åŸå‹å¦‚ä¸‹ï¼š

    * ```c++
      Time operator*(double m, const Time & t);
      ```

* ï¼ˆ3ï¼‰å‹å…ƒå‡½æ•°æ˜¯ä¸€ç±»ç‰¹æ®Šçš„éæˆå‘˜å‡½æ•°ï¼Œå®ƒå¯ä»¥è®¿é—®ç±»çš„ç§æœ‰æˆå‘˜ã€‚

#### 11.3.1 åˆ›å»ºå‹å…ƒ
