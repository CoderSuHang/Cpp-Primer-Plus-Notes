## ç¬¬åä¸€ç«  ä½¿ç”¨ç±»

å­¦ä¹ æœ¬ç« çŸ¥è¯†çš„æœ€å¥½æ–¹æ³•ï¼šåœ¨æˆ‘ä»¬è‡ªå·±å¼€å‘çš„C++ç¨‹åºä¸­ä½¿ç”¨å…¶ä¸­çš„æ–°ç‰¹æ€§ã€‚â€œè½»æ¾åœ°ä½¿ç”¨è¿™ç§è¯­è¨€ï¼Œä¸è¦è§‰å¾—å¿…é¡»ä½¿ç”¨æ‰€æœ‰çš„ç‰¹æ€§ï¼Œä¸è¦åœ¨ç¬¬ä¸€æ¬¡å­¦ä¹ æ—¶å°±è¯•å›¾ä½¿ç”¨æ‰€æœ‰çš„ç‰¹æ€§ã€‚â€

### 11.1 è¿ç®—ç¬¦é‡è½½

ï¼ˆ1ï¼‰è¿ç®—ç¬¦é‡è½½æ˜¯ä¸€ç§å½¢å¼çš„C++å¤šæ€ã€‚

ï¼ˆ2ï¼‰C++å…è®¸å°†è¿ç®—ç¬¦é‡è½½æ‰©å±•åˆ°ç”¨æˆ·å®šä¹‰çš„ç±»å‹ï¼š

* ä¸¤ä¸ªæ•°ç»„ç›¸åŠ ï¼Œé‡è½½+è¿ç®—ç¬¦ï¼š

  * ```c++
    evening = sam + janet;
    ```

ï¼ˆ3ï¼‰é‡è½½è¿ç®—ç¬¦æ–¹æ³•ï¼š

* éœ€ä½¿ç”¨è¢«ç§°ä¸ºè¿ç®—ç¬¦å‡½æ•°çš„ç‰¹æ®Šå‡½æ•°å½¢å¼ï¼š

  * ```c++
    operatorop(argument-list)
    ```

  * ä¾‹å¦‚ï¼š

    * operator +()é‡è½½+è¿ç®—ç¬¦
    * operator *()é‡è½½ *è¿ç®—ç¬¦

  * ä¸èƒ½è™šæ„ä¸€ä¸ªæ–°çš„ç¬¦å·ï¼š@ç­‰



### 11.2 è®¡ç®—æ—¶é—´ï¼šä¸€ä¸ªè¿ç®—ç¬¦é‡è½½ç¤ºä¾‹

â€‹	é‡‡ç”¨ä¸€ä¸ªä½¿ç”¨æ–¹æ³•æ¥å¤„ç†åŠ æ³•çš„Timeç±»ï¼š

ï¼ˆ1ï¼‰ç±»å£°æ˜ï¼š

* ç¤ºä¾‹ï¼š

  * ```c++
    #pragma once
    // ch11_01_mytime0.h -- Time class before operator overloading
    #ifndef CH11_O1_MYTIME0_H_
    #define CH11_O1_MYTIME0_H_
    
    class Time
    {
    private:
    	int hours;
    	int minutes;
    public:
    	Time();
    	Time(int h, int m = 0);
    	void AddMin(int m);
    	void AddHr(int h);
    	void Reset(int h = 0, int m = 0);
    	Time Sum(const Time& t) const;
    	void Show() const;
    };
    #endif
    ```

ï¼ˆ2ï¼‰æ–¹æ³•å®šä¹‰æ–‡ä»¶ï¼š

* ç¤ºä¾‹ï¼š

  * ```c++
    // ch11_02_mytime0.cpp -- implementing Time methods
    #include <iostream>
    #include "ch11_01_mytime0.h"
    
    Time::Time()
    {
    	hours = minutes = 0;
    }
    
    Time::Time(int h, int m)
    {
    	hours = h;
    	minutes = m;
    }
    
    void Time::AddMin(int m)
    {
    	minutes += m;
    	hours += minutes / 60;
    	minutes %= 60;
    }
    
    void Time::AddHr(int h)
    {
    	hours += h;
    }
    
    void Time::Reset(int h, int m)
    {
    	hours = h;
    	minutes = m;
    }
    
    Time Time::Sum(const Time& t) const
    {
    	Time sum;
    	sum.minutes = minutes + t.minutes;
    	sum.hours = hours + t.hours + sum.minutes / 60;
    	sum.minutes %= 60;
    	return sum;
    }
    
    void Time::Show() const
    {
    	std::cout << hours << " hours, " << minutes << " minutes";
    }
    ```

ï¼ˆ3ï¼‰ä½¿ç”¨ç±»æ–‡ä»¶ï¼š

* ç¤ºä¾‹ï¼š

  * ```c++
    // ch11_03_usetime0.cpp -- using the first draft of the Time class
    // compile usetime0.cpp and mytime0.cpp together
    
    #include <iostream>
    #include "ch11_01_mytime0.h"
    
    int main()
    {
    	using std::cout;
    	using std::endl;
    	Time planning;
    	Time coding(2, 40);
    	Time fixing(5, 55);
    	Time total;
    
    	cout << "planning time = ";
    	planning.Show();
    	cout << endl;
    
    	cout << "coding time = ";
    	coding.Show();
    	cout << endl;
    
    	cout << "fixing time = ";
    	fixing.Show();
    	cout << endl;
    
    	total = coding.Sum(fixing);
    	cout << "coding.Sum(fixing) = ";
    	total.Show();
    	cout << endl;
    
    	return 0;
    }
    ```

* ç»“æœï¼š

  * ```c++
    planning time = 0 hours, 0 minutes
    coding time = 2 hours, 40 minutes
    fixing time = 5 hours, 55 minutes
    coding.Sum(fixing) = 8 hours, 35 minutes
    ```

#### 11.2.1 æ·»åŠ åŠ æ³•è¿ç®—ç¬¦

â€‹	å°†Timeç±»è½¬æ¢ä¸ºé‡è½½çš„åŠ æ³•è¿ç®—ç¬¦å¾ˆå®¹æ˜“ï¼Œåªè¦å°†Sun()çš„åç§°æ”¹ä¸ºoperator+()å³å¯ã€‚

ï¼ˆ1ï¼‰ç±»å£°æ˜ï¼š

* ç¤ºä¾‹ï¼š

  * ```c++
    #pragma once
    
    // ch11_04_mytime1.h -- Time class before operator overloading
    #ifndef CH11_O4_MYTIME1_H_
    #define CH11_O4_MYTIME1_H_
    
    class Time
    {
    private:
    	int hours;
    	int minutes;
    public:
    	Time();
    	Time(int h, int m = 0);
    	void AddMin(int m);
    	void AddHr(int h);
    	void Reset(int h = 0, int m = 0);
    	Time operator+(const Time& t) const;
    	void Show() const;
    };
    #endif
    ```

ï¼ˆ2ï¼‰ç±»æ–¹æ³•æ–‡ä»¶ï¼š

* ç¤ºä¾‹ï¼š

  * ```c++
    // ch11_05_mytime1.cpp -- implementing Time methods
    #include <iostream>
    #include "ch11_04_mytime1.h"
    
    Time::Time()
    {
    	hours = minutes = 0;
    }
    
    Time::Time(int h, int m)
    {
    	hours = h;
    	minutes = m;
    }
    
    void Time::AddMin(int m)
    {
    	minutes += m;
    	hours += minutes / 60;
    	minutes %= 60;
    }
    
    void Time::AddHr(int h)
    {
    	hours += h;
    }
    
    void Time::Reset(int h, int m)
    {
    	hours = h;
    	minutes = m;
    }
    
    Time Time::operator+(const Time& t) const
    {
    	Time sum;
    	sum.minutes = minutes + t.minutes;
    	sum.hours = hours + t.hours + sum.minutes / 60;
    	sum.minutes %= 60;
    	return sum;
    }
    
    void Time::Show() const
    {
    	std::cout << hours << " hours, " << minutes << " minutes";
    }
    ```

  * å’ŒSum()ä¸€æ ·ï¼Œoperator+()ä¹Ÿæ˜¯ç”±Timeå¯¹è±¡è°ƒç”¨çš„ï¼Œå®ƒå°†ç¬¬äºŒä¸ªTimeå¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªTimeå¯¹è±¡ã€‚

  * å› æ­¤å¯ä»¥åƒè°ƒç”¨Sum()é‚£æ ·æ¥è°ƒç”¨operator()æ–¹æ³•ï¼š

    * ```c++
      total = morefixing.operator+(total);
      ```

  * ä¹Ÿå¯ä»¥ç”¨è¿ç®—ç¬¦ï¼š

    * ```c++
      total = coding + fixing;
      ```

    * è¿ç®—ç¬¦å·¦ä¾§å¯¹è±¡â€œcodingâ€æ˜¯è°ƒç”¨å¯¹è±¡ï¼Œå³ä¾§å¯¹è±¡â€œfixingâ€æ˜¯ä½œä¸ºå‚æ•°è¢«ä¼ é€’çš„å¯¹è±¡ã€‚

ï¼ˆ3ï¼‰ä½¿ç”¨ç±»æ–‡ä»¶ï¼š

* ç¤ºä¾‹ï¼š

  * ```c++
    // ch11_06_usetime1.cpp -- using the first draft of the Time class
    // compile usetime1.cpp and mytime1.cpp together
    
    #include <iostream>
    #include "ch11_04_mytime1.h"
    
    int main()
    {
    	using std::cout;
    	using std::endl;
    	Time planning;
    	Time coding(2, 40);
    	Time fixing(5, 55);
    	Time total;
    
    	cout << "planning time = ";
    	planning.Show();
    	cout << endl;
    
    	cout << "coding time = ";
    	coding.Show();
    	cout << endl;
    
    	cout << "fixing time = ";
    	fixing.Show();
    	cout << endl;
    
    	total = coding + fixing;
    	cout << "coding + fixing = ";
    	total.Show();
    	cout << endl;
    
    	Time morefixing(3, 28);
    	cout << "morefixing time = ";
    	morefixing.Show();
    	cout << endl;
    	total = morefixing.operator+(total);
    	cout << "morefixing.operator+(total) = ";
    	total.Show();
    	cout << endl;
    
    	return 0;
    }
    ```

* ç»“æœï¼š

  * ```c++
    planning time = 0 hours, 0 minutes
    coding time = 2 hours, 40 minutes
    fixing time = 5 hours, 55 minutes
    coding + fixing = 8 hours, 35 minutes
    morefixing time = 3 hours, 28 minutes
    morefixing.operator+(total) = 12 hours, 3 minutes
    ```

ğŸ“Œè¿ç®—ç¬¦å¯ä»¥å’Œå¤šä¸ªå¯¹è±¡é‡è½½åœ¨ä¸€æ¡è¯­å¥ä¸­ã€‚

#### 11.2.2 é‡è½½é™åˆ¶
